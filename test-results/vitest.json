{"numTotalTestSuites":216,"numPassedTestSuites":168,"numFailedTestSuites":48,"numPendingTestSuites":0,"numTotalTests":459,"numPassedTests":392,"numFailedTests":65,"numPendingTests":2,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1767034135132,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["recordAdminAudit"],"fullName":"recordAdminAudit persists SLA audit records","status":"passed","title":"persists SLA audit records","duration":3.9528999999997723,"failureMessages":[],"meta":{}},{"ancestorTitles":["recordAdminAudit"],"fullName":"recordAdminAudit accepts other resource types and defaults missing data to null","status":"passed","title":"accepts other resource types and defaults missing data to null","duration":0.5619000000001506,"failureMessages":[],"meta":{}}],"startTime":1767034172000,"endTime":1767034172004.562,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-audit.test.ts"},{"assertionResults":[{"ancestorTitles":["Admin Automation Rules API Integration","GET /api/admin/automation-rules"],"fullName":"Admin Automation Rules API Integration GET /api/admin/automation-rules lists automation rules scoped to organization","status":"failed","title":"lists automation rules scoped to organization","duration":6.68100000000004,"failureMessages":["TypeError: res.json is not a function\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-automation-rules-integration.test.ts:90:30\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Automation Rules API Integration","GET /api/admin/automation-rules"],"fullName":"Admin Automation Rules API Integration GET /api/admin/automation-rules rejects non-admin users","status":"passed","title":"rejects non-admin users","duration":1.455699999999979,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin Automation Rules API Integration","POST /api/admin/automation-rules"],"fullName":"Admin Automation Rules API Integration POST /api/admin/automation-rules creates automation rule with valid config","status":"failed","title":"creates automation rule with valid config","duration":7.254599999999755,"failureMessages":["TypeError: res.json is not a function\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-automation-rules-integration.test.ts:142:30\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Automation Rules API Integration","POST /api/admin/automation-rules"],"fullName":"Admin Automation Rules API Integration POST /api/admin/automation-rules rejects invalid trigger config","status":"passed","title":"rejects invalid trigger config","duration":1.0365999999999076,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin Automation Rules API Integration","POST /api/admin/automation-rules"],"fullName":"Admin Automation Rules API Integration POST /api/admin/automation-rules rejects invalid action config","status":"passed","title":"rejects invalid action config","duration":0.9005999999999403,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin Automation Rules API Integration","POST /api/admin/automation-rules"],"fullName":"Admin Automation Rules API Integration POST /api/admin/automation-rules validates required fields","status":"passed","title":"validates required fields","duration":2.837999999999738,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin Automation Rules API Integration","PATCH /api/admin/automation-rules/[id]"],"fullName":"Admin Automation Rules API Integration PATCH /api/admin/automation-rules/[id] updates automation rule successfully","status":"failed","title":"updates automation rule successfully","duration":2.0015000000003056,"failureMessages":["TypeError: res.json is not a function\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-automation-rules-integration.test.ts:244:30\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Automation Rules API Integration","PATCH /api/admin/automation-rules/[id]"],"fullName":"Admin Automation Rules API Integration PATCH /api/admin/automation-rules/[id] validates trigger config when updating","status":"passed","title":"validates trigger config when updating","duration":0.8250000000002728,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin Automation Rules API Integration","PATCH /api/admin/automation-rules/[id]"],"fullName":"Admin Automation Rules API Integration PATCH /api/admin/automation-rules/[id] rejects update to rule from different org","status":"passed","title":"rejects update to rule from different org","duration":0.48369999999977153,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin Automation Rules API Integration","DELETE /api/admin/automation-rules/[id]"],"fullName":"Admin Automation Rules API Integration DELETE /api/admin/automation-rules/[id] deletes automation rule successfully","status":"failed","title":"deletes automation rule successfully","duration":0.7679000000002816,"failureMessages":["TypeError: res.json is not a function\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-automation-rules-integration.test.ts:323:30\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Automation Rules API Integration","DELETE /api/admin/automation-rules/[id]"],"fullName":"Admin Automation Rules API Integration DELETE /api/admin/automation-rules/[id] rejects deletion of rule from different org","status":"passed","title":"rejects deletion of rule from different org","duration":1.6916999999998552,"failureMessages":[],"meta":{}}],"startTime":1767034148791,"endTime":1767034148817.6917,"status":"failed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-automation-rules-integration.test.ts"},{"assertionResults":[{"ancestorTitles":["Admin Teams API Integration","GET /api/admin/teams"],"fullName":"Admin Teams API Integration GET /api/admin/teams lists teams scoped to organization","status":"failed","title":"lists teams scoped to organization","duration":18.459799999999632,"failureMessages":["TypeError: res.json is not a function\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-teams-integration.test.ts:94:30\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Teams API Integration","GET /api/admin/teams"],"fullName":"Admin Teams API Integration GET /api/admin/teams rejects non-admin users","status":"failed","title":"rejects non-admin users","duration":7.330600000000231,"failureMessages":["AssertionError: expected 401 to be 403 // Object.is equality\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-teams-integration.test.ts:121:26\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Teams API Integration","POST /api/admin/teams"],"fullName":"Admin Teams API Integration POST /api/admin/teams creates team with valid data","status":"failed","title":"creates team with valid data","duration":7.046800000000076,"failureMessages":["TypeError: res.json is not a function\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-teams-integration.test.ts:150:30\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Teams API Integration","POST /api/admin/teams"],"fullName":"Admin Teams API Integration POST /api/admin/teams rejects duplicate team name","status":"failed","title":"rejects duplicate team name","duration":1.4858000000003813,"failureMessages":["TypeError: res.json is not a function\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-teams-integration.test.ts:186:30\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Teams API Integration","POST /api/admin/teams"],"fullName":"Admin Teams API Integration POST /api/admin/teams rejects invalid member IDs","status":"failed","title":"rejects invalid member IDs","duration":2.048000000000684,"failureMessages":["AssertionError: expected 500 to be 404 // Object.is equality\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-teams-integration.test.ts:206:26\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Teams API Integration","POST /api/admin/teams"],"fullName":"Admin Teams API Integration POST /api/admin/teams validates required fields","status":"passed","title":"validates required fields","duration":4.286399999999958,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin Teams API Integration","PATCH /api/admin/teams/[id]"],"fullName":"Admin Teams API Integration PATCH /api/admin/teams/[id] updates team successfully","status":"failed","title":"updates team successfully","duration":74.16949999999997,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at Module.PATCH (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/admin/teams/[id]/route.ts:95:26)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-teams-integration.test.ts:256:19\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Teams API Integration","PATCH /api/admin/teams/[id]"],"fullName":"Admin Teams API Integration PATCH /api/admin/teams/[id] rejects update to team from different org","status":"failed","title":"rejects update to team from different org","duration":2.66820000000007,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at Module.PATCH (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/admin/teams/[id]/route.ts:95:26)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-teams-integration.test.ts:288:19\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Teams API Integration","DELETE /api/admin/teams/[id]"],"fullName":"Admin Teams API Integration DELETE /api/admin/teams/[id] deletes team without assigned tickets","status":"failed","title":"deletes team without assigned tickets","duration":0.8787000000002081,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at Module.DELETE (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/admin/teams/[id]/route.ts:187:26)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-teams-integration.test.ts:310:19\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Teams API Integration","DELETE /api/admin/teams/[id]"],"fullName":"Admin Teams API Integration DELETE /api/admin/teams/[id] rejects deletion of team with assigned tickets","status":"failed","title":"rejects deletion of team with assigned tickets","duration":0.6041999999997643,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at Module.DELETE (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/admin/teams/[id]/route.ts:187:26)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-teams-integration.test.ts:341:19\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Teams API Integration","DELETE /api/admin/teams/[id]"],"fullName":"Admin Teams API Integration DELETE /api/admin/teams/[id] rejects deletion of team from different org","status":"failed","title":"rejects deletion of team from different org","duration":0.5025999999998021,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at Module.DELETE (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/admin/teams/[id]/route.ts:187:26)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-teams-integration.test.ts:360:19\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}}],"startTime":1767034140561,"endTime":1767034140682.5027,"status":"failed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-teams-integration.test.ts"},{"assertionResults":[{"ancestorTitles":["Admin Users API Integration","GET /api/admin/users"],"fullName":"Admin Users API Integration GET /api/admin/users lists users scoped to organization","status":"failed","title":"lists users scoped to organization","duration":7.275399999999536,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'method')\n    at Module.GET (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/admin/users/route.ts:23:17)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-users-integration.test.ts:102:19\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Users API Integration","GET /api/admin/users"],"fullName":"Admin Users API Integration GET /api/admin/users rejects non-admin users","status":"failed","title":"rejects non-admin users","duration":0.6543000000001484,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'method')\n    at Module.GET (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/admin/users/route.ts:23:17)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-users-integration.test.ts:132:19\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Users API Integration","GET /api/admin/users"],"fullName":"Admin Users API Integration GET /api/admin/users returns 401 when not authenticated","status":"failed","title":"returns 401 when not authenticated","duration":0.6367999999993117,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'method')\n    at Module.GET (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/admin/users/route.ts:23:17)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-users-integration.test.ts:143:19\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Users API Integration","POST /api/admin/users"],"fullName":"Admin Users API Integration POST /api/admin/users creates user with valid data","status":"failed","title":"creates user with valid data","duration":537.5607,"failureMessages":["TypeError: res.json is not a function\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-users-integration.test.ts:177:30\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Users API Integration","POST /api/admin/users"],"fullName":"Admin Users API Integration POST /api/admin/users rejects duplicate email","status":"failed","title":"rejects duplicate email","duration":1.2995999999993728,"failureMessages":["TypeError: res.json is not a function\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-users-integration.test.ts:216:30\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Users API Integration","POST /api/admin/users"],"fullName":"Admin Users API Integration POST /api/admin/users rejects invalid team IDs","status":"failed","title":"rejects invalid team IDs","duration":542.1695,"failureMessages":["AssertionError: expected 500 to be 404 // Object.is equality\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-users-integration.test.ts:239:26\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Users API Integration","POST /api/admin/users"],"fullName":"Admin Users API Integration POST /api/admin/users validates required fields","status":"passed","title":"validates required fields","duration":5.169699999999466,"failureMessages":[],"meta":{}},{"ancestorTitles":["Admin Users API Integration","PATCH /api/admin/users/[id]"],"fullName":"Admin Users API Integration PATCH /api/admin/users/[id] updates user successfully","status":"failed","title":"updates user successfully","duration":2.1765000000004875,"failureMessages":["TypeError: res.json is not a function\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-users-integration.test.ts:298:30\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Users API Integration","PATCH /api/admin/users/[id]"],"fullName":"Admin Users API Integration PATCH /api/admin/users/[id] rejects update to user from different org","status":"failed","title":"rejects update to user from different org","duration":6.027800000000752,"failureMessages":["AssertionError: expected 500 to be 404 // Object.is equality\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-users-integration.test.ts:330:26\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Users API Integration","PATCH /api/admin/users/[id]"],"fullName":"Admin Users API Integration PATCH /api/admin/users/[id] rejects update with duplicate email","status":"failed","title":"rejects update with duplicate email","duration":1.636899999999514,"failureMessages":["AssertionError: expected 500 to be 409 // Object.is equality\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-users-integration.test.ts:354:26\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Users API Integration","DELETE /api/admin/users/[id]"],"fullName":"Admin Users API Integration DELETE /api/admin/users/[id] deletes user without active tickets","status":"failed","title":"deletes user without active tickets","duration":3.548200000000179,"failureMessages":["TypeError: res.json is not a function\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-users-integration.test.ts:378:30\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Users API Integration","DELETE /api/admin/users/[id]"],"fullName":"Admin Users API Integration DELETE /api/admin/users/[id] rejects deletion of user with active tickets","status":"failed","title":"rejects deletion of user with active tickets","duration":1.7449999999998909,"failureMessages":["TypeError: res.json is not a function\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-users-integration.test.ts:411:30\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Admin Users API Integration","DELETE /api/admin/users/[id]"],"fullName":"Admin Users API Integration DELETE /api/admin/users/[id] rejects deletion of user from different org","status":"failed","title":"rejects deletion of user from different org","duration":1.4456999999993059,"failureMessages":["AssertionError: expected 500 to be 404 // Object.is equality\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-users-integration.test.ts:430:26\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}}],"startTime":1767034140133,"endTime":1767034141245.4458,"status":"failed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/admin-users-integration.test.ts"},{"assertionResults":[{"ancestorTitles":["assignment-suggest"],"fullName":"assignment-suggest suggests agent with lowest load","status":"passed","title":"suggests agent with lowest load","duration":19.0958999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["assignment-suggest"],"fullName":"assignment-suggest suggests agent with zero load when others have tickets","status":"passed","title":"suggests agent with zero load when others have tickets","duration":0.46669999999994616,"failureMessages":[],"meta":{}},{"ancestorTitles":["assignment-suggest"],"fullName":"assignment-suggest returns null when no agents available","status":"passed","title":"returns null when no agents available","duration":0.6994999999997162,"failureMessages":[],"meta":{}},{"ancestorTitles":["assignment-suggest"],"fullName":"assignment-suggest excludes ticket from load calculation when excludeTicketId provided","status":"passed","title":"excludes ticket from load calculation when excludeTicketId provided","duration":11.3729000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["assignment-suggest"],"fullName":"assignment-suggest enforces organization isolation","status":"passed","title":"enforces organization isolation","duration":1.2345000000000255,"failureMessages":[],"meta":{}},{"ancestorTitles":["assignment-suggest"],"fullName":"assignment-suggest handles multiple agents with same minimum load","status":"passed","title":"handles multiple agents with same minimum load","duration":1.1561000000001513,"failureMessages":[],"meta":{}}],"startTime":1767034161325,"endTime":1767034161359.156,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/assignment-suggest.test.ts"},{"assertionResults":[{"ancestorTitles":["attachment download logging"],"fullName":"attachment download logging logs download metadata","status":"passed","title":"logs download metadata","duration":832.0580000000004,"failureMessages":[],"meta":{}}],"startTime":1767034149177,"endTime":1767034150009.058,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/attachment-download.test.ts"},{"assertionResults":[{"ancestorTitles":["uploadRequestSchema"],"fullName":"uploadRequestSchema defaults visibility to public","status":"passed","title":"defaults visibility to public","duration":3.9238000000000284,"failureMessages":[],"meta":{}},{"ancestorTitles":["isMimeAllowed"],"fullName":"isMimeAllowed allows exact match","status":"passed","title":"allows exact match","duration":0.3514999999997599,"failureMessages":[],"meta":{}},{"ancestorTitles":["isMimeAllowed"],"fullName":"isMimeAllowed supports wildcards","status":"passed","title":"supports wildcards","duration":0.2582999999999629,"failureMessages":[],"meta":{}},{"ancestorTitles":["isSizeAllowed"],"fullName":"isSizeAllowed rejects sizes above max","status":"passed","title":"rejects sizes above max","duration":0.23520000000007713,"failureMessages":[],"meta":{}},{"ancestorTitles":["isSizeAllowed"],"fullName":"isSizeAllowed accepts sizes within limit","status":"passed","title":"accepts sizes within limit","duration":0.20429999999987558,"failureMessages":[],"meta":{}}],"startTime":1767034164932,"endTime":1767034164937.2583,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/attachment-validation.test.ts"},{"assertionResults":[{"ancestorTitles":["Authorization Security Tests","requireAuth()"],"fullName":"Authorization Security Tests requireAuth() rejects when session is null","status":"passed","title":"rejects when session is null","duration":5.02789999999959,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","requireAuth()"],"fullName":"Authorization Security Tests requireAuth() rejects when session.user is null","status":"passed","title":"rejects when session.user is null","duration":2.1974999999997635,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","requireAuth()"],"fullName":"Authorization Security Tests requireAuth() rejects when role is null","status":"passed","title":"rejects when role is null","duration":0.8998000000001412,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","requireAuth()"],"fullName":"Authorization Security Tests requireAuth() rejects when role is undefined","status":"passed","title":"rejects when role is undefined","duration":0.5075000000001637,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","requireAuth()"],"fullName":"Authorization Security Tests requireAuth() rejects when role is invalid","status":"passed","title":"rejects when role is invalid","duration":0.6010999999998603,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","requireAuth()"],"fullName":"Authorization Security Tests requireAuth() rejects when role is empty string","status":"passed","title":"rejects when role is empty string","duration":0.502400000000307,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","requireAuth()"],"fullName":"Authorization Security Tests requireAuth() accepts valid REQUESTER role","status":"passed","title":"accepts valid REQUESTER role","duration":0.8625000000001819,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","requireAuth()"],"fullName":"Authorization Security Tests requireAuth() accepts valid AGENT role","status":"passed","title":"accepts valid AGENT role","duration":0.28199999999969805,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","requireAuth()"],"fullName":"Authorization Security Tests requireAuth() accepts valid ADMIN role","status":"passed","title":"accepts valid ADMIN role","duration":0.3149999999995998,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","ticketScope()"],"fullName":"Authorization Security Tests ticketScope() REQUESTER role gets requesterId filter","status":"passed","title":"REQUESTER role gets requesterId filter","duration":0.298200000000179,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","ticketScope()"],"fullName":"Authorization Security Tests ticketScope() AGENT role with organization gets organizationId filter","status":"passed","title":"AGENT role with organization gets organizationId filter","duration":0.45069999999986976,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","ticketScope()"],"fullName":"Authorization Security Tests ticketScope() ADMIN role with organization gets organizationId filter","status":"passed","title":"ADMIN role with organization gets organizationId filter","duration":1.2044000000000779,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","ticketScope()"],"fullName":"Authorization Security Tests ticketScope() AGENT role without organization gets no-match filter","status":"passed","title":"AGENT role without organization gets no-match filter","duration":0.2779000000000451,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","ticketScope()"],"fullName":"Authorization Security Tests ticketScope() ADMIN role without organization gets no-match filter","status":"passed","title":"ADMIN role without organization gets no-match filter","duration":0.2418999999999869,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","isSameOrganization()"],"fullName":"Authorization Security Tests isSameOrganization() returns true when organization IDs match","status":"passed","title":"returns true when organization IDs match","duration":0.21329999999989013,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","isSameOrganization()"],"fullName":"Authorization Security Tests isSameOrganization() returns false when organization IDs don't match","status":"passed","title":"returns false when organization IDs don't match","duration":0.18260000000009313,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","isSameOrganization()"],"fullName":"Authorization Security Tests isSameOrganization() returns false when user has null organizationId","status":"passed","title":"returns false when user has null organizationId","duration":0.11670000000003711,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","isSameOrganization()"],"fullName":"Authorization Security Tests isSameOrganization() returns false when user has undefined organizationId","status":"passed","title":"returns false when user has undefined organizationId","duration":0.15210000000024593,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","isSameOrganization()"],"fullName":"Authorization Security Tests isSameOrganization() returns false when target organizationId is different","status":"passed","title":"returns false when target organizationId is different","duration":0.1550999999999476,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","Cross-Organization Access Prevention"],"fullName":"Authorization Security Tests Cross-Organization Access Prevention ticketScope prevents REQUESTER from seeing other org tickets","status":"passed","title":"ticketScope prevents REQUESTER from seeing other org tickets","duration":0.8249999999998181,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","Cross-Organization Access Prevention"],"fullName":"Authorization Security Tests Cross-Organization Access Prevention ticketScope prevents AGENT from seeing tickets from different org","status":"passed","title":"ticketScope prevents AGENT from seeing tickets from different org","duration":0.3602000000000771,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","Cross-Organization Access Prevention"],"fullName":"Authorization Security Tests Cross-Organization Access Prevention isSameOrganization correctly identifies cross-org access attempts","status":"passed","title":"isSameOrganization correctly identifies cross-org access attempts","duration":0.1823999999996886,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","Cross-Organization Access Prevention"],"fullName":"Authorization Security Tests Cross-Organization Access Prevention isSameOrganization prevents access when user has no organization","status":"passed","title":"isSameOrganization prevents access when user has no organization","duration":0.13000000000010914,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","Privilege Escalation Prevention"],"fullName":"Authorization Security Tests Privilege Escalation Prevention REQUESTER cannot access AGENT-only endpoints","status":"passed","title":"REQUESTER cannot access AGENT-only endpoints","duration":0.21220000000039363,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","Privilege Escalation Prevention"],"fullName":"Authorization Security Tests Privilege Escalation Prevention AGENT cannot access ADMIN-only endpoints","status":"passed","title":"AGENT cannot access ADMIN-only endpoints","duration":0.20319999999992433,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","Privilege Escalation Prevention"],"fullName":"Authorization Security Tests Privilege Escalation Prevention Invalid role cannot bypass authentication","status":"passed","title":"Invalid role cannot bypass authentication","duration":0.4011999999997897,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","Privilege Escalation Prevention"],"fullName":"Authorization Security Tests Privilege Escalation Prevention REQUESTER role cannot be elevated to AGENT","status":"passed","title":"REQUESTER role cannot be elevated to AGENT","duration":0.3686999999999898,"failureMessages":[],"meta":{}},{"ancestorTitles":["Authorization Security Tests","Privilege Escalation Prevention"],"fullName":"Authorization Security Tests Privilege Escalation Prevention AGENT role cannot be elevated to ADMIN","status":"passed","title":"AGENT role cannot be elevated to ADMIN","duration":0.22100000000000364,"failureMessages":[],"meta":{}}],"startTime":1767034157597,"endTime":1767034157615.221,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/authorization-security.test.ts"},{"assertionResults":[{"ancestorTitles":["automation rules","validateTriggerConfig"],"fullName":"automation rules validateTriggerConfig validates ticketCreated trigger","status":"passed","title":"validates ticketCreated trigger","duration":3.9036000000000968,"failureMessages":[],"meta":{}},{"ancestorTitles":["automation rules","validateTriggerConfig"],"fullName":"automation rules validateTriggerConfig validates ticketUpdated trigger","status":"passed","title":"validates ticketUpdated trigger","duration":0.4933000000000902,"failureMessages":[],"meta":{}},{"ancestorTitles":["automation rules","validateTriggerConfig"],"fullName":"automation rules validateTriggerConfig validates statusChanged trigger","status":"passed","title":"validates statusChanged trigger","duration":0.45859999999993306,"failureMessages":[],"meta":{}},{"ancestorTitles":["automation rules","validateTriggerConfig"],"fullName":"automation rules validateTriggerConfig validates priorityChanged trigger","status":"passed","title":"validates priorityChanged trigger","duration":0.5054000000000087,"failureMessages":[],"meta":{}},{"ancestorTitles":["automation rules","validateTriggerConfig"],"fullName":"automation rules validateTriggerConfig rejects invalid trigger type","status":"passed","title":"rejects invalid trigger type","duration":2.367899999999736,"failureMessages":[],"meta":{}},{"ancestorTitles":["automation rules","validateTriggerConfig"],"fullName":"automation rules validateTriggerConfig rejects statusChanged without status","status":"passed","title":"rejects statusChanged without status","duration":0.684099999999944,"failureMessages":[],"meta":{}},{"ancestorTitles":["automation rules","validateTriggerConfig"],"fullName":"automation rules validateTriggerConfig rejects priorityChanged without priority","status":"passed","title":"rejects priorityChanged without priority","duration":0.4299999999998363,"failureMessages":[],"meta":{}},{"ancestorTitles":["automation rules","validateActionConfig"],"fullName":"automation rules validateActionConfig validates assignUser action","status":"passed","title":"validates assignUser action","duration":0.9050999999999476,"failureMessages":[],"meta":{}},{"ancestorTitles":["automation rules","validateActionConfig"],"fullName":"automation rules validateActionConfig validates assignTeam action","status":"passed","title":"validates assignTeam action","duration":0.563499999999749,"failureMessages":[],"meta":{}},{"ancestorTitles":["automation rules","validateActionConfig"],"fullName":"automation rules validateActionConfig validates setPriority action","status":"passed","title":"validates setPriority action","duration":0.46250000000009095,"failureMessages":[],"meta":{}},{"ancestorTitles":["automation rules","validateActionConfig"],"fullName":"automation rules validateActionConfig validates setStatus action","status":"passed","title":"validates setStatus action","duration":0.41469999999981155,"failureMessages":[],"meta":{}},{"ancestorTitles":["automation rules","validateActionConfig"],"fullName":"automation rules validateActionConfig validates addTag action","status":"passed","title":"validates addTag action","duration":0.3708000000001448,"failureMessages":[],"meta":{}},{"ancestorTitles":["automation rules","validateActionConfig"],"fullName":"automation rules validateActionConfig rejects invalid action type","status":"passed","title":"rejects invalid action type","duration":0.3308999999999287,"failureMessages":[],"meta":{}},{"ancestorTitles":["automation rules","validateActionConfig"],"fullName":"automation rules validateActionConfig rejects assignUser without userId","status":"passed","title":"rejects assignUser without userId","duration":0.5321999999996478,"failureMessages":[],"meta":{}},{"ancestorTitles":["automation rules","validateActionConfig"],"fullName":"automation rules validateActionConfig rejects invalid UUID","status":"passed","title":"rejects invalid UUID","duration":0.6060999999999694,"failureMessages":[],"meta":{}},{"ancestorTitles":["automation rules","evaluateAutomationRules"],"fullName":"automation rules evaluateAutomationRules happy path: executes one action on matching trigger","status":"passed","title":"happy path: executes one action on matching trigger","duration":2.4178000000001703,"failureMessages":[],"meta":{}},{"ancestorTitles":["automation rules","evaluateAutomationRules"],"fullName":"automation rules evaluateAutomationRules executes rule on ticketCreated event","status":"passed","title":"executes rule on ticketCreated event","duration":0.4562999999998283,"failureMessages":[],"meta":{}},{"ancestorTitles":["automation rules","evaluateAutomationRules"],"fullName":"automation rules evaluateAutomationRules executes rule on statusChanged trigger","status":"failed","title":"executes rule on statusChanged trigger","duration":5.636300000000119,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ { where: { id: 'ticket-1' }, …(1) } ]\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1420:10)\n    at Proxy.<anonymous> (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1090:14)\n    at Proxy.methodWrapper (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/chai@6.2.2/node_modules/chai/index.js:1700:25)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/automation-rules.test.ts:197:40\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["automation rules","evaluateAutomationRules"],"fullName":"automation rules evaluateAutomationRules does not execute rule when trigger does not match","status":"passed","title":"does not execute rule when trigger does not match","duration":0.47089999999980137,"failureMessages":[],"meta":{}},{"ancestorTitles":["automation rules","evaluateAutomationRules"],"fullName":"automation rules evaluateAutomationRules skips disabled rules","status":"passed","title":"skips disabled rules","duration":0.20669999999972788,"failureMessages":[],"meta":{}},{"ancestorTitles":["automation rules","evaluateAutomationRules"],"fullName":"automation rules evaluateAutomationRules skips invalid rule configs","status":"failed","title":"skips invalid rule configs","duration":1.4367999999999483,"failureMessages":["AssertionError: expected \"error\" to be called at least once\n    at Proxy.<anonymous> (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1400:10)\n    at Proxy.<anonymous> (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1090:14)\n    at Proxy.methodWrapper (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/chai@6.2.2/node_modules/chai/index.js:1700:25)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/automation-rules.test.ts:254:26\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["automation rules","evaluateAutomationRules"],"fullName":"automation rules evaluateAutomationRules executes addTag action","status":"failed","title":"executes addTag action","duration":0.9296000000003914,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ { where: { …(1) }, …(2) } ]\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1420:10)\n    at Proxy.<anonymous> (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1090:14)\n    at Proxy.methodWrapper (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/chai@6.2.2/node_modules/chai/index.js:1700:25)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/automation-rules.test.ts:279:43\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}}],"startTime":1767034145059,"endTime":1767034145084.9297,"status":"failed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/automation-rules.test.ts"},{"assertionResults":[{"ancestorTitles":["Bulk Actions Integration","Bulk Assign"],"fullName":"Bulk Actions Integration Bulk Assign assigns tickets to an agent","status":"failed","title":"assigns tickets to an agent","duration":20.000100000000202,"failureMessages":["AssertionError: expected 400 to be 200 // Object.is equality\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/bulk-actions-integration.test.ts:152:31\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Bulk Actions Integration","Bulk Assign"],"fullName":"Bulk Actions Integration Bulk Assign rejects bulk assign from requester","status":"passed","title":"rejects bulk assign from requester","duration":1.471599999999853,"failureMessages":[],"meta":{}},{"ancestorTitles":["Bulk Actions Integration","Bulk Assign"],"fullName":"Bulk Actions Integration Bulk Assign rejects invalid assignee","status":"passed","title":"rejects invalid assignee","duration":1.133299999999963,"failureMessages":[],"meta":{}},{"ancestorTitles":["Bulk Actions Integration","Bulk Status Change"],"fullName":"Bulk Actions Integration Bulk Status Change changes status of multiple tickets","status":"failed","title":"changes status of multiple tickets","duration":1.8739000000000487,"failureMessages":["AssertionError: expected 400 to be 200 // Object.is equality\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/bulk-actions-integration.test.ts:239:31\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Bulk Actions Integration","Bulk Status Change"],"fullName":"Bulk Actions Integration Bulk Status Change rejects invalid status","status":"passed","title":"rejects invalid status","duration":2.3068999999995867,"failureMessages":[],"meta":{}},{"ancestorTitles":["Bulk Actions Integration","Error Handling"],"fullName":"Bulk Actions Integration Error Handling returns 401 when not authenticated","status":"passed","title":"returns 401 when not authenticated","duration":0.6440000000002328,"failureMessages":[],"meta":{}},{"ancestorTitles":["Bulk Actions Integration","Error Handling"],"fullName":"Bulk Actions Integration Error Handling handles tickets not found","status":"failed","title":"handles tickets not found","duration":1.7512000000001535,"failureMessages":["AssertionError: expected undefined to be 1 // Object.is equality\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/bulk-actions-integration.test.ts:298:27\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}}],"startTime":1767034144893,"endTime":1767034144922.7512,"status":"failed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/bulk-actions-integration.test.ts"},{"assertionResults":[{"ancestorTitles":["Comment spam guard"],"fullName":"Comment spam guard blocks rapid consecutive comments","status":"failed","title":"blocks rapid consecutive comments","duration":18.993199999999888,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'create')\n    at Module.POST (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/tickets/[id]/comments/route.ts:96:27)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/comment-spam-guard.test.ts:73:18\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}}],"startTime":1767034149913,"endTime":1767034149931.9932,"status":"failed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/comment-spam-guard.test.ts"},{"assertionResults":[{"ancestorTitles":["POST /api/tickets/[id]/csat"],"fullName":"POST /api/tickets/[id]/csat returns 401 when unauthenticated","status":"passed","title":"returns 401 when unauthenticated","duration":9.202800000000025,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/[id]/csat"],"fullName":"POST /api/tickets/[id]/csat returns 404 when ticket not found","status":"passed","title":"returns 404 when ticket not found","duration":2.4715000000001055,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/[id]/csat"],"fullName":"POST /api/tickets/[id]/csat returns 403 when requester is not ticket owner","status":"passed","title":"returns 403 when requester is not ticket owner","duration":1.2399999999997817,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/[id]/csat"],"fullName":"POST /api/tickets/[id]/csat returns 409 when response already exists","status":"passed","title":"returns 409 when response already exists","duration":1.463799999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/[id]/csat"],"fullName":"POST /api/tickets/[id]/csat returns 400 when score is out of range","status":"passed","title":"returns 400 when score is out of range","duration":2.909299999999803,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/[id]/csat"],"fullName":"POST /api/tickets/[id]/csat creates CSAT response successfully","status":"passed","title":"creates CSAT response successfully","duration":9.146299999999883,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/[id]/csat"],"fullName":"POST /api/tickets/[id]/csat creates CSAT response without comment","status":"passed","title":"creates CSAT response without comment","duration":1.387800000000425,"failureMessages":[],"meta":{}}],"startTime":1767034157600,"endTime":1767034157628.3877,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/csat-response.test.ts"},{"assertionResults":[{"ancestorTitles":["CSAT Token Security","generateCsatToken()"],"fullName":"CSAT Token Security generateCsatToken() generates a valid token for a ticket","status":"passed","title":"generates a valid token for a ticket","duration":2.6257000000000517,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSAT Token Security","generateCsatToken()"],"fullName":"CSAT Token Security generateCsatToken() generates different tokens for different tickets","status":"passed","title":"generates different tokens for different tickets","duration":1.12920000000031,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSAT Token Security","generateCsatToken()"],"fullName":"CSAT Token Security generateCsatToken() generates different tokens for same ticket with different expiry","status":"passed","title":"generates different tokens for same ticket with different expiry","duration":0.46940000000040527,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSAT Token Security","validateCsatToken()"],"fullName":"CSAT Token Security validateCsatToken() validates a correctly generated token","status":"passed","title":"validates a correctly generated token","duration":0.647899999999936,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSAT Token Security","validateCsatToken()"],"fullName":"CSAT Token Security validateCsatToken() rejects expired tokens","status":"passed","title":"rejects expired tokens","duration":0.3352999999997337,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSAT Token Security","validateCsatToken()"],"fullName":"CSAT Token Security validateCsatToken() rejects tokens with invalid format","status":"passed","title":"rejects tokens with invalid format","duration":0.563499999999749,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSAT Token Security","validateCsatToken()"],"fullName":"CSAT Token Security validateCsatToken() rejects tokens with tampered signature","status":"passed","title":"rejects tokens with tampered signature","duration":0.7242999999998574,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSAT Token Security","validateCsatToken()"],"fullName":"CSAT Token Security validateCsatToken() rejects tokens with wrong ticket ID in payload","status":"passed","title":"rejects tokens with wrong ticket ID in payload","duration":0.47899999999981446,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSAT Token Security","validateCsatToken()"],"fullName":"CSAT Token Security validateCsatToken() rejects tokens generated with different secret","status":"passed","title":"rejects tokens generated with different secret","duration":0.36249999999972715,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSAT Token Security","validateCsatToken()"],"fullName":"CSAT Token Security validateCsatToken() handles base64url encoding correctly","status":"passed","title":"handles base64url encoding correctly","duration":0.4278999999996813,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSAT Token Security","validateCsatToken()"],"fullName":"CSAT Token Security validateCsatToken() validates token expiry correctly","status":"passed","title":"validates token expiry correctly","duration":0.8106999999999971,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSAT Token Security","Token binding and anti-gaming"],"fullName":"CSAT Token Security Token binding and anti-gaming tokens are bound to specific ticket IDs","status":"passed","title":"tokens are bound to specific ticket IDs","duration":0.6983000000000175,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSAT Token Security","Token binding and anti-gaming"],"fullName":"CSAT Token Security Token binding and anti-gaming tokens cannot be reused after validation (one-time use enforced by database)","status":"passed","title":"tokens cannot be reused after validation (one-time use enforced by database)","duration":0.32189999999991414,"failureMessages":[],"meta":{}}],"startTime":1767034161236,"endTime":1767034161246.6982,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/csat-token-security.test.ts"},{"assertionResults":[],"startTime":1767034135132,"endTime":1767034135132,"status":"failed","message":"[vitest] There was an error when mocking a module. If you are using \"vi.mock\" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/csat-trigger.test.ts"},{"assertionResults":[{"ancestorTitles":["Dashboard SLA status filtering"],"fullName":"Dashboard SLA status filtering filters tickets by breached SLA status","status":"passed","title":"filters tickets by breached SLA status","duration":5.544699999999921,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard SLA status filtering"],"fullName":"Dashboard SLA status filtering excludes closed and resolved tickets from SLA status filtering","status":"passed","title":"excludes closed and resolved tickets from SLA status filtering","duration":0.602100000000064,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard SLA widgets - breach state counting"],"fullName":"Dashboard SLA widgets - breach state counting counts breached tickets correctly","status":"passed","title":"counts breached tickets correctly","duration":0.5387000000000626,"failureMessages":[],"meta":{}},{"ancestorTitles":["Dashboard SLA widgets - breach state counting"],"fullName":"Dashboard SLA widgets - breach state counting excludes closed tickets from counts","status":"passed","title":"excludes closed tickets from counts","duration":0.4495999999999185,"failureMessages":[],"meta":{}}],"startTime":1767034170546,"endTime":1767034170554.4497,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/dashboard-sla-widgets.test.ts"},{"assertionResults":[{"ancestorTitles":["EmailAdapterStub"],"fullName":"EmailAdapterStub returns queued status and generated ID","status":"passed","title":"returns queued status and generated ID","duration":2.7783999999996922,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmailAdapterStub"],"fullName":"EmailAdapterStub handles template ID and data","status":"passed","title":"handles template ID and data","duration":0.6772000000000844,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmailAdapterReal"],"fullName":"EmailAdapterReal throws error when SMTP credentials are missing","status":"passed","title":"throws error when SMTP credentials are missing","duration":2.8717999999998938,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmailAdapterReal"],"fullName":"EmailAdapterReal initializes with environment variables","status":"passed","title":"initializes with environment variables","duration":8.101500000000215,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmailAdapterReal"],"fullName":"EmailAdapterReal initializes with config object","status":"passed","title":"initializes with config object","duration":1.6597000000001572,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmailAdapterReal"],"fullName":"EmailAdapterReal sends email and returns sent status","status":"passed","title":"sends email and returns sent status","duration":4.995200000000295,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmailAdapterReal"],"fullName":"EmailAdapterReal handles template ID and data parameters","status":"passed","title":"handles template ID and data parameters","duration":11.787600000000111,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmailAdapterReal"],"fullName":"EmailAdapterReal handles secure SMTP port (465)","status":"passed","title":"handles secure SMTP port (465)","duration":1.063199999999597,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmailAdapterReal"],"fullName":"EmailAdapterReal uses default SMTP_FROM when not provided","status":"passed","title":"uses default SMTP_FROM when not provided","duration":6.636500000000069,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmailAdapterReal"],"fullName":"EmailAdapterReal handles error during email sending gracefully","status":"passed","title":"handles error during email sending gracefully","duration":26.091799999999694,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmailAdapterReal with nodemailer (when implemented)"],"fullName":"EmailAdapterReal with nodemailer (when implemented) sends email successfully with nodemailer when implemented","status":"passed","title":"sends email successfully with nodemailer when implemented","duration":113.2231999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmailAdapterReal with nodemailer (when implemented)"],"fullName":"EmailAdapterReal with nodemailer (when implemented) handles nodemailer errors when implemented","status":"passed","title":"handles nodemailer errors when implemented","duration":81.44400000000041,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmailAdapterReal with nodemailer (when implemented)"],"fullName":"EmailAdapterReal with nodemailer (when implemented) creates transporter with correct SMTP configuration when implemented","status":"passed","title":"creates transporter with correct SMTP configuration when implemented","duration":0.24479999999948632,"failureMessages":[],"meta":{}},{"ancestorTitles":["EmailAdapterReal with nodemailer (when implemented)"],"fullName":"EmailAdapterReal with nodemailer (when implemented) creates secure transporter for port 465 when implemented","status":"passed","title":"creates secure transporter for port 465 when implemented","duration":0.18410000000039872,"failureMessages":[],"meta":{}},{"ancestorTitles":["Email adapter selection"],"fullName":"Email adapter selection uses stub adapter when EMAIL_ENABLED is not set","status":"passed","title":"uses stub adapter when EMAIL_ENABLED is not set","duration":1.6067000000002736,"failureMessages":[],"meta":{}},{"ancestorTitles":["Email adapter selection"],"fullName":"Email adapter selection uses stub adapter when EMAIL_ENABLED is false","status":"passed","title":"uses stub adapter when EMAIL_ENABLED is false","duration":5.569599999999809,"failureMessages":[],"meta":{}},{"ancestorTitles":["Email adapter selection"],"fullName":"Email adapter selection falls back to stub when EMAIL_ENABLED is true but SMTP config missing","status":"passed","title":"falls back to stub when EMAIL_ENABLED is true but SMTP config missing","duration":5.20889999999963,"failureMessages":[],"meta":{}}],"startTime":1767034153670,"endTime":1767034153945.209,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/email-adapter.test.ts"},{"assertionResults":[{"ancestorTitles":["Notification channels"],"fullName":"Notification channels happy path: creating notification results in in-app feed item","status":"failed","title":"happy path: creating notification results in in-app feed item","duration":52.771200000000135,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at requireAuth (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/authorization.ts:20:26)\n    at Module.GET (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/notifications/route.ts:49:22)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/notification-channels.test.ts:76:23\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["Notification channels"],"fullName":"Notification channels retrieves in-app notifications feed","status":"failed","title":"retrieves in-app notifications feed","duration":1.160899999999856,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at requireAuth (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/authorization.ts:20:26)\n    at Module.GET (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/notifications/route.ts:49:22)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/notification-channels.test.ts:108:23\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)"],"meta":{}},{"ancestorTitles":["Notification channels"],"fullName":"Notification channels returns 401 when unauthenticated","status":"failed","title":"returns 401 when unauthenticated","duration":0.7375999999994747,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at requireAuth (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/authorization.ts:20:26)\n    at Module.GET (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/notifications/route.ts:49:22)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/notification-channels.test.ts:124:23\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)"],"meta":{}}],"startTime":1767034141084,"endTime":1767034141138.7375,"status":"failed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/notification-channels.test.ts"},{"assertionResults":[{"ancestorTitles":["Notification Delivery Integration","SLA Breach Notification Delivery"],"fullName":"Notification Delivery Integration SLA Breach Notification Delivery delivers in-app notification when SLA breach occurs","status":"failed","title":"delivers in-app notification when SLA breach occurs","duration":11.488599999999678,"failureMessages":["ZodError: [\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/\",\n    \"path\": [\n      \"jobId\"\n    ],\n    \"message\": \"Invalid UUID\"\n  },\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/\",\n    \"path\": [\n      \"ticketId\"\n    ],\n    \"message\": \"Invalid UUID\"\n  },\n  {\n    \"expected\": \"string\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"categoryId\"\n    ],\n    \"message\": \"Invalid input: expected string, received undefined\"\n  }\n]\n    at Module.handleSlaJob (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/sla-worker.ts:42:38)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/notification-delivery-integration.test.ts:91:28\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1209:10)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1653:37\n    at Traces.$ (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)"],"meta":{}},{"ancestorTitles":["Notification Delivery Integration","SLA Breach Notification Delivery"],"fullName":"Notification Delivery Integration SLA Breach Notification Delivery delivers notification with correct idempotency key","status":"failed","title":"delivers notification with correct idempotency key","duration":4.613699999999881,"failureMessages":["ZodError: [\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/\",\n    \"path\": [\n      \"jobId\"\n    ],\n    \"message\": \"Invalid UUID\"\n  },\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/\",\n    \"path\": [\n      \"ticketId\"\n    ],\n    \"message\": \"Invalid UUID\"\n  },\n  {\n    \"expected\": \"string\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"categoryId\"\n    ],\n    \"message\": \"Invalid input: expected string, received undefined\"\n  }\n]\n    at Module.handleSlaJob (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/sla-worker.ts:42:38)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/notification-delivery-integration.test.ts:122:13\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1209:10)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1653:37\n    at Traces.$ (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)"],"meta":{}},{"ancestorTitles":["Notification Delivery Integration","SLA Breach Notification Delivery"],"fullName":"Notification Delivery Integration SLA Breach Notification Delivery deduplicates notifications with same idempotency key","status":"failed","title":"deduplicates notifications with same idempotency key","duration":0.8510000000005675,"failureMessages":["ZodError: [\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/\",\n    \"path\": [\n      \"jobId\"\n    ],\n    \"message\": \"Invalid UUID\"\n  },\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/\",\n    \"path\": [\n      \"ticketId\"\n    ],\n    \"message\": \"Invalid UUID\"\n  },\n  {\n    \"expected\": \"string\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"categoryId\"\n    ],\n    \"message\": \"Invalid input: expected string, received undefined\"\n  }\n]\n    at Module.handleSlaJob (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/sla-worker.ts:42:38)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/notification-delivery-integration.test.ts:149:29\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1209:10)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1653:37\n    at Traces.$ (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)"],"meta":{}},{"ancestorTitles":["Notification Delivery Integration","SLA Reminder Notification Delivery"],"fullName":"Notification Delivery Integration SLA Reminder Notification Delivery delivers reminder notification to requester","status":"passed","title":"delivers reminder notification to requester","duration":7.108900000000176,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification Delivery Integration","SLA Reminder Notification Delivery"],"fullName":"Notification Delivery Integration SLA Reminder Notification Delivery includes ticket metadata in notification","status":"passed","title":"includes ticket metadata in notification","duration":0.7484000000004016,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification Delivery Integration","Notification Preference Handling"],"fullName":"Notification Delivery Integration Notification Preference Handling respects user notification preferences","status":"failed","title":"respects user notification preferences","duration":0.8009000000001834,"failureMessages":["ZodError: [\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/\",\n    \"path\": [\n      \"jobId\"\n    ],\n    \"message\": \"Invalid UUID\"\n  },\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/\",\n    \"path\": [\n      \"ticketId\"\n    ],\n    \"message\": \"Invalid UUID\"\n  },\n  {\n    \"expected\": \"string\",\n    \"code\": \"invalid_type\",\n    \"path\": [\n      \"categoryId\"\n    ],\n    \"message\": \"Invalid input: expected string, received undefined\"\n  }\n]\n    at Module.handleSlaJob (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/sla-worker.ts:42:38)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/notification-delivery-integration.test.ts:254:28\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1209:10)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1653:37\n    at Traces.$ (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)"],"meta":{}},{"ancestorTitles":["Notification Delivery Integration","Notification Error Handling"],"fullName":"Notification Delivery Integration Notification Error Handling handles notification service errors gracefully","status":"failed","title":"handles notification service errors gracefully","duration":13.209800000000541,"failureMessages":["AssertionError: expected [Function] to throw error including 'Notification service unavailable' but got '[\\n  {\\n    \"origin\": \"string\",\\n    …'\n    at _Assertion.<anonymous> (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1485:16)\n    at _Assertion.<anonymous> (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1090:14)\n    at _Assertion.methodWrapper (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/chai@6.2.2/node_modules/chai/index.js:1700:25)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+expect@4.0.16/node_modules/@vitest/expect/dist/index.js:1704:20\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"meta":{}}],"startTime":1767034145484,"endTime":1767034145523.2097,"status":"failed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/notification-delivery-integration.test.ts"},{"assertionResults":[{"ancestorTitles":["Notification service"],"fullName":"Notification service sends email via adapter stub","status":"passed","title":"sends email via adapter stub","duration":6.5736000000001695,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification service"],"fullName":"Notification service creates in-app notification and appears in feed","status":"passed","title":"creates in-app notification and appears in feed","duration":1.2532999999998538,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification service"],"fullName":"Notification service deduplicates by idempotencyKey","status":"passed","title":"deduplicates by idempotencyKey","duration":1.1123999999999796,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification service"],"fullName":"Notification service throws on invalid payload","status":"passed","title":"throws on invalid payload","duration":2.8460000000000036,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification service"],"fullName":"Notification service allows notification when user preference is enabled","status":"passed","title":"allows notification when user preference is enabled","duration":1.4093000000002576,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification service"],"fullName":"Notification service blocks notification when user preference is disabled","status":"passed","title":"blocks notification when user preference is disabled","duration":0.9262999999996282,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification service"],"fullName":"Notification service uses defaults when preferences are missing","status":"passed","title":"uses defaults when preferences are missing","duration":0.9135000000001128,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification service"],"fullName":"Notification service blocks comment update when preference is disabled","status":"passed","title":"blocks comment update when preference is disabled","duration":0.5905999999999949,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification service"],"fullName":"Notification service blocks in-app notification when preference is disabled","status":"passed","title":"blocks in-app notification when preference is disabled","duration":0.772899999999936,"failureMessages":[],"meta":{}},{"ancestorTitles":["Notification service"],"fullName":"Notification service uses defaults when user is not found","status":"passed","title":"uses defaults when user is not found","duration":0.6592000000000553,"failureMessages":[],"meta":{}}],"startTime":1767034161616,"endTime":1767034161633.6592,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/notification.test.ts"},{"assertionResults":[{"ancestorTitles":["POST /api/tickets/{id}/comments rate limiting"],"fullName":"POST /api/tickets/{id}/comments rate limiting blocks when threshold is exceeded","status":"failed","title":"blocks when threshold is exceeded","duration":52.0684999999994,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at requireAuth (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/authorization.ts:20:26)\n    at Module.POST (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/tickets/[id]/comments/route.ts:24:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/rate-limit.test.ts:84:18\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}}],"startTime":1767034140779,"endTime":1767034140831.0686,"status":"failed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/rate-limit.test.ts"},{"assertionResults":[{"ancestorTitles":["reopen reason helpers"],"fullName":"reopen reason helpers requires reason when reopening","status":"passed","title":"requires reason when reopening","duration":1.4983999999999469,"failureMessages":[],"meta":{}},{"ancestorTitles":["reopen reason helpers"],"fullName":"reopen reason helpers validates required length","status":"passed","title":"validates required length","duration":0.6225000000004002,"failureMessages":[],"meta":{}}],"startTime":1767034177242,"endTime":1767034177244.6226,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/reopen-reason.test.ts"},{"assertionResults":[{"ancestorTitles":["Reopen throttling"],"fullName":"Reopen throttling blocks reopen within cooldown window","status":"failed","title":"blocks reopen within cooldown window","duration":32.94260000000031,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at requireAuth (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/authorization.ts:20:26)\n    at updateTicket (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/tickets/[id]/route.ts:56:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"meta":{}},{"ancestorTitles":["Reopen throttling"],"fullName":"Reopen throttling allows reopen after cooldown window","status":"failed","title":"allows reopen after cooldown window","duration":1.0781999999999243,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at requireAuth (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/authorization.ts:20:26)\n    at updateTicket (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/tickets/[id]/route.ts:56:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"meta":{}},{"ancestorTitles":["Reopen throttling"],"fullName":"Reopen throttling allows first reopen (no previous reopen)","status":"failed","title":"allows first reopen (no previous reopen)","duration":1.1637000000000626,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at requireAuth (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/authorization.ts:20:26)\n    at updateTicket (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/tickets/[id]/route.ts:56:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"meta":{}},{"ancestorTitles":["Reopen throttling"],"fullName":"Reopen throttling allows reopen when cooldown is disabled","status":"failed","title":"allows reopen when cooldown is disabled","duration":2.259900000000016,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at requireAuth (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/authorization.ts:20:26)\n    at updateTicket (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/tickets/[id]/route.ts:56:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"meta":{}},{"ancestorTitles":["Reopen throttling"],"fullName":"Reopen throttling does not check cooldown when status is not changing to reopened","status":"failed","title":"does not check cooldown when status is not changing to reopened","duration":1.2710000000006403,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at requireAuth (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/authorization.ts:20:26)\n    at updateTicket (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/tickets/[id]/route.ts:56:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"meta":{}},{"ancestorTitles":["Reopen throttling"],"fullName":"Reopen throttling does not check cooldown when ticket is already reopened","status":"failed","title":"does not check cooldown when ticket is already reopened","duration":0.8702999999995882,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at requireAuth (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/authorization.ts:20:26)\n    at updateTicket (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/tickets/[id]/route.ts:56:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"meta":{}},{"ancestorTitles":["Reopen reason validation"],"fullName":"Reopen reason validation requires reopen reason when reopening ticket","status":"failed","title":"requires reopen reason when reopening ticket","duration":1.0390000000006694,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at requireAuth (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/authorization.ts:20:26)\n    at updateTicket (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/tickets/[id]/route.ts:56:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"meta":{}},{"ancestorTitles":["Reopen reason validation"],"fullName":"Reopen reason validation requires reopen reason to be at least 10 characters","status":"failed","title":"requires reopen reason to be at least 10 characters","duration":0.9205000000001746,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at requireAuth (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/authorization.ts:20:26)\n    at updateTicket (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/tickets/[id]/route.ts:56:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"meta":{}},{"ancestorTitles":["Reopen reason validation"],"fullName":"Reopen reason validation allows reopen with valid reason","status":"failed","title":"allows reopen with valid reason","duration":2.100800000000163,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at requireAuth (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/authorization.ts:20:26)\n    at updateTicket (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/tickets/[id]/route.ts:56:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"meta":{}},{"ancestorTitles":["Reopen reason validation"],"fullName":"Reopen reason validation stores reopen reason in audit event data","status":"failed","title":"stores reopen reason in audit event data","duration":1.2653000000000247,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at requireAuth (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/authorization.ts:20:26)\n    at updateTicket (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/tickets/[id]/route.ts:56:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"meta":{}},{"ancestorTitles":["Reopen reason validation"],"fullName":"Reopen reason validation does not require reopen reason for non-reopen status changes","status":"failed","title":"does not require reopen reason for non-reopen status changes","duration":0.9313000000001921,"failureMessages":["Error: `headers` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context\n    at throwForMissingRequestStore (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\app-render\\work-unit-async-storage.external.js:63:33)\n    at headers (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next@16.0.10_@babel+core@7._f10634483ce5b832a4474c880782ca0f\\node_modules\\next\\dist\\server\\request\\headers.js:123:67)\n    at getServerSession (C:\\Users\\kacpe\\Documents\\GitHub\\HelpDeskApp\\node_modules\\.pnpm\\next-auth@4.24.13_next@16.0_2fa0a9b379ff4e199f8f32ee1c160dd0\\node_modules\\next-auth\\next\\index.js:113:41)\n    at requireAuth (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/authorization.ts:20:26)\n    at updateTicket (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/app/api/tickets/[id]/route.ts:56:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"meta":{}}],"startTime":1767034140835,"endTime":1767034140881.9314,"status":"failed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/reopen-throttling.test.ts"},{"assertionResults":[{"ancestorTitles":["decideRetry"],"fullName":"decideRetry retries until maxAttempts is reached","status":"passed","title":"retries until maxAttempts is reached","duration":1.9690999999997985,"failureMessages":[],"meta":{}},{"ancestorTitles":["decideRetry"],"fullName":"decideRetry sends to dlq when attempts exhausted","status":"passed","title":"sends to dlq when attempts exhausted","duration":0.244499999999789,"failureMessages":[],"meta":{}},{"ancestorTitles":["decideRetry"],"fullName":"decideRetry drops when maxAttempts is zero","status":"passed","title":"drops when maxAttempts is zero","duration":0.20240000000012515,"failureMessages":[],"meta":{}}],"startTime":1767034173927,"endTime":1767034173929.2444,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/retry-policy.test.ts"},{"assertionResults":[{"ancestorTitles":["Saved Views Integration","List Views"],"fullName":"Saved Views Integration List Views lists user's saved views","status":"passed","title":"lists user's saved views","duration":4.698899999999867,"failureMessages":[],"meta":{}},{"ancestorTitles":["Saved Views Integration","List Views"],"fullName":"Saved Views Integration List Views returns 401 when not authenticated","status":"passed","title":"returns 401 when not authenticated","duration":0.4007000000001426,"failureMessages":[],"meta":{}},{"ancestorTitles":["Saved Views Integration","Create View"],"fullName":"Saved Views Integration Create View creates a new saved view","status":"passed","title":"creates a new saved view","duration":8.21349999999984,"failureMessages":[],"meta":{}},{"ancestorTitles":["Saved Views Integration","Create View"],"fullName":"Saved Views Integration Create View rejects duplicate view name","status":"passed","title":"rejects duplicate view name","duration":1.3058999999998377,"failureMessages":[],"meta":{}},{"ancestorTitles":["Saved Views Integration","Create View"],"fullName":"Saved Views Integration Create View rejects invalid filter schema","status":"passed","title":"rejects invalid filter schema","duration":1.025499999999738,"failureMessages":[],"meta":{}},{"ancestorTitles":["Saved Views Integration","Update View"],"fullName":"Saved Views Integration Update View updates an existing view","status":"passed","title":"updates an existing view","duration":1.5249000000003434,"failureMessages":[],"meta":{}},{"ancestorTitles":["Saved Views Integration","Update View"],"fullName":"Saved Views Integration Update View returns 404 when view not found","status":"passed","title":"returns 404 when view not found","duration":0.5708000000004176,"failureMessages":[],"meta":{}},{"ancestorTitles":["Saved Views Integration","Delete View"],"fullName":"Saved Views Integration Delete View deletes a view","status":"passed","title":"deletes a view","duration":0.7205999999996493,"failureMessages":[],"meta":{}},{"ancestorTitles":["Saved Views Integration","Delete View"],"fullName":"Saved Views Integration Delete View returns 404 when view not found","status":"passed","title":"returns 404 when view not found","duration":0.41449999999986176,"failureMessages":[],"meta":{}},{"ancestorTitles":["Saved Views Integration","Set Default View"],"fullName":"Saved Views Integration Set Default View sets a view as default","status":"passed","title":"sets a view as default","duration":1.192700000000059,"failureMessages":[],"meta":{}}],"startTime":1767034157679,"endTime":1767034157700.1926,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/saved-views-integration.test.ts"},{"assertionResults":[{"ancestorTitles":["search filters helpers"],"fullName":"search filters helpers parses comma separated values and arrays","status":"passed","title":"parses comma separated values and arrays","duration":2.8962000000001353,"failureMessages":[],"meta":{}},{"ancestorTitles":["search filters helpers"],"fullName":"search filters helpers appends values preserving multiple entries","status":"passed","title":"appends values preserving multiple entries","duration":0.6545999999998457,"failureMessages":[],"meta":{}}],"startTime":1767034175868,"endTime":1767034175871.6545,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/search-filters.test.ts"},{"assertionResults":[{"ancestorTitles":["SLA policy client validation"],"fullName":"SLA policy client validation accepts valid payload","status":"passed","title":"accepts valid payload","duration":3.712500000000091,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLA policy client validation"],"fullName":"SLA policy client validation rejects non-positive numbers","status":"passed","title":"rejects non-positive numbers","duration":0.7454999999999927,"failureMessages":[],"meta":{}}],"startTime":1767034172148,"endTime":1767034172152.7456,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/sla-admin-validation.test.ts"},{"assertionResults":[{"ancestorTitles":["SLA drill-down filtering"],"fullName":"SLA drill-down filtering correctly filters tickets by SLA status parameter","status":"passed","title":"correctly filters tickets by SLA status parameter","duration":5.018800000000283,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLA drill-down filtering"],"fullName":"SLA drill-down filtering handles edge cases in SLA filtering","status":"passed","title":"handles edge cases in SLA filtering","duration":0.7285999999999149,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLA drill-down filtering"],"fullName":"SLA drill-down filtering generates correct navigation URLs for SLA widgets","status":"passed","title":"generates correct navigation URLs for SLA widgets","duration":0.2858000000001084,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLA drill-down filtering"],"fullName":"SLA drill-down filtering preserves other query parameters when filtering by SLA status","status":"passed","title":"preserves other query parameters when filtering by SLA status","duration":0.24230000000034124,"failureMessages":[],"meta":{}}],"startTime":1767034160183,"endTime":1767034160189.286,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/sla-drill-down.test.ts"},{"assertionResults":[{"ancestorTitles":["nextEscalationLevel"],"fullName":"nextEscalationLevel returns null when path empty","status":"passed","title":"returns null when path empty","duration":1.4279999999998836,"failureMessages":[],"meta":{}},{"ancestorTitles":["nextEscalationLevel"],"fullName":"nextEscalationLevel returns first level when no current level","status":"passed","title":"returns first level when no current level","duration":0.781800000000203,"failureMessages":[],"meta":{}},{"ancestorTitles":["nextEscalationLevel"],"fullName":"nextEscalationLevel returns next level sequentially","status":"passed","title":"returns next level sequentially","duration":0.3065000000001419,"failureMessages":[],"meta":{}},{"ancestorTitles":["deriveNextEscalation"],"fullName":"deriveNextEscalation falls back to base path","status":"passed","title":"falls back to base path","duration":0.7571000000002641,"failureMessages":[],"meta":{}},{"ancestorTitles":["deriveNextEscalation"],"fullName":"deriveNextEscalation returns null when no levels at all","status":"passed","title":"returns null when no levels at all","duration":0.7593999999999141,"failureMessages":[],"meta":{}}],"startTime":1767034172428,"endTime":1767034172431.7595,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/sla-escalation.test.ts"},{"assertionResults":[{"ancestorTitles":["SLA job schema"],"fullName":"SLA job schema validates a complete payload","status":"passed","title":"validates a complete payload","duration":4.890599999999722,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLA job schema"],"fullName":"SLA job schema rejects invalid dueAt","status":"passed","title":"rejects invalid dueAt","duration":1.711899999999332,"failureMessages":[],"meta":{}},{"ancestorTitles":["enqueue helper stub"],"fullName":"enqueue helper stub returns queue result","status":"failed","title":"returns queue result","duration":9.21100000000024,"failureMessages":["AssertionError: expected false to be true // Object.is equality\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/sla-jobs.test.ts:45:29\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["enqueue helper stub"],"fullName":"enqueue helper stub dedupes on matching idempotency key","status":"failed","title":"dedupes on matching idempotency key","duration":1.0861000000004424,"failureMessages":["AssertionError: expected false to be true // Object.is equality\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/sla-jobs.test.ts:63:28\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}}],"startTime":1767034149712,"endTime":1767034149729.0862,"status":"failed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/sla-jobs.test.ts"},{"assertionResults":[{"ancestorTitles":["deriveSlaPauseUpdates"],"fullName":"deriveSlaPauseUpdates starts a pause when transitioning into waiting on requester","status":"passed","title":"starts a pause when transitioning into waiting on requester","duration":2.37480000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["deriveSlaPauseUpdates"],"fullName":"deriveSlaPauseUpdates resumes a pause and shifts due dates when leaving waiting status","status":"passed","title":"resumes a pause and shifts due dates when leaving waiting status","duration":4.843900000000303,"failureMessages":[],"meta":{}}],"startTime":1767034176377,"endTime":1767034176384.844,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/sla-pause.test.ts"},{"assertionResults":[{"ancestorTitles":["SLA policy admin API"],"fullName":"SLA policy admin API creates policy for org with category override","status":"passed","title":"creates policy for org with category override","duration":15.265800000000127,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLA policy admin API"],"fullName":"SLA policy admin API rejects non-admin user","status":"passed","title":"rejects non-admin user","duration":1.1554000000000997,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLA policy admin API"],"fullName":"SLA policy admin API lists policies scoped to org","status":"passed","title":"lists policies scoped to org","duration":2.2463000000002467,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLA policy admin API"],"fullName":"SLA policy admin API prevents updating policy from another org","status":"passed","title":"prevents updating policy from another org","duration":1.8105000000000473,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLA policy admin API"],"fullName":"SLA policy admin API records audit when updating policy for org","status":"passed","title":"records audit when updating policy for org","duration":2.3502000000003136,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLA policy admin API"],"fullName":"SLA policy admin API deletes policy for admin org","status":"passed","title":"deletes policy for admin org","duration":4.505700000000161,"failureMessages":[],"meta":{}}],"startTime":1767034159565,"endTime":1767034159592.5056,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/sla-policies.route.test.ts"},{"assertionResults":[{"ancestorTitles":["SLA due date calculation"],"fullName":"SLA due date calculation computes due dates based on policy hours","status":"passed","title":"computes due dates based on policy hours","duration":2.9272000000000844,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLA due date calculation"],"fullName":"SLA due date calculation returns null due dates when policy is missing","status":"passed","title":"returns null due dates when policy is missing","duration":0.3278999999993175,"failureMessages":[],"meta":{}}],"startTime":1767034177799,"endTime":1767034177802.328,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/sla-preview.test.ts"},{"assertionResults":[{"ancestorTitles":["SLA reminder handler"],"fullName":"SLA reminder handler sends notification for reminder jobs with metadata","status":"passed","title":"sends notification for reminder jobs with metadata","duration":6.867199999999684,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLA reminder handler"],"fullName":"SLA reminder handler skips when recipient missing","status":"passed","title":"skips when recipient missing","duration":0.5254999999997381,"failureMessages":[],"meta":{}}],"startTime":1767034165958,"endTime":1767034165965.5254,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/sla-reminder.test.ts"},{"assertionResults":[{"ancestorTitles":["SLA scheduler"],"fullName":"SLA scheduler enqueues only future timers","status":"passed","title":"enqueues only future timers","duration":4.134599999999409,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLA scheduler"],"fullName":"SLA scheduler dedupes repeated schedules","status":"failed","title":"dedupes repeated schedules","duration":8.97059999999965,"failureMessages":["AssertionError: expected false to be true // Object.is equality\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/sla-scheduler.test.ts:40:31\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["SLA scheduler","SLA reminders"],"fullName":"SLA scheduler SLA reminders schedules a reminder before due when lead time configured","status":"passed","title":"schedules a reminder before due when lead time configured","duration":2.080699999999524,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLA scheduler","SLA reminders"],"fullName":"SLA scheduler SLA reminders does not schedule reminder when due is within lead time","status":"passed","title":"does not schedule reminder when due is within lead time","duration":1.8245999999999185,"failureMessages":[],"meta":{}}],"startTime":1767034145258,"endTime":1767034145275.8247,"status":"failed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/sla-scheduler.test.ts"},{"assertionResults":[{"ancestorTitles":["SLA worker"],"fullName":"SLA worker creates audit + notification when breach job fires","status":"passed","title":"creates audit + notification when breach job fires","duration":9.475600000000668,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLA worker"],"fullName":"SLA worker skips when ticket already has first response","status":"passed","title":"skips when ticket already has first response","duration":2.3611000000000786,"failureMessages":[],"meta":{}},{"ancestorTitles":["SLA worker"],"fullName":"SLA worker skips when ticket is waiting on requester","status":"passed","title":"skips when ticket is waiting on requester","duration":1.3949000000002343,"failureMessages":[],"meta":{}}],"startTime":1767034164099,"endTime":1767034164112.395,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/sla-worker.test.ts"},{"assertionResults":[{"ancestorTitles":["TicketForm SLA preview"],"fullName":"TicketForm SLA preview renders SLA preview matching returned policy","status":"passed","title":"renders SLA preview matching returned policy","duration":148.57920000000013,"failureMessages":[],"meta":{}},{"ancestorTitles":["TicketForm SLA preview"],"fullName":"TicketForm SLA preview requests preview again when priority changes","status":"passed","title":"requests preview again when priority changes","duration":380.35909999999967,"failureMessages":[],"meta":{}}],"startTime":1767034155381,"endTime":1767034155910.3591,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/ticket-form-sla-preview.test.tsx"},{"assertionResults":[{"ancestorTitles":["ticket-policy status rules"],"fullName":"ticket-policy status rules allows requester owner to close their open ticket","status":"passed","title":"allows requester owner to close their open ticket","duration":2.7609999999999673,"failureMessages":[],"meta":{}},{"ancestorTitles":["ticket-policy status rules"],"fullName":"ticket-policy status rules allows requester owner to reopen when closed","status":"passed","title":"allows requester owner to reopen when closed","duration":1.6971999999996115,"failureMessages":[],"meta":{}},{"ancestorTitles":["ticket-policy status rules"],"fullName":"ticket-policy status rules denies requester who is not owner","status":"passed","title":"denies requester who is not owner","duration":0.9564999999997781,"failureMessages":[],"meta":{}},{"ancestorTitles":["ticket-policy status rules"],"fullName":"ticket-policy status rules agents can choose any status","status":"passed","title":"agents can choose any status","duration":0.3389999999999418,"failureMessages":[],"meta":{}}],"startTime":1767034173013,"endTime":1767034173018.339,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/ticket-policy.test.ts"},{"assertionResults":[{"ancestorTitles":["ticket search"],"fullName":"ticket search searches in both title and descriptionMd fields","status":"passed","title":"searches in both title and descriptionMd fields","duration":9.038300000000163,"failureMessages":[],"meta":{}},{"ancestorTitles":["ticket search"],"fullName":"ticket search does not include search conditions when no search query provided","status":"passed","title":"does not include search conditions when no search query provided","duration":1.5437000000001717,"failureMessages":[],"meta":{}}],"startTime":1767034168506,"endTime":1767034168517.5437,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/ticket-search.test.ts"},{"assertionResults":[{"ancestorTitles":["worker health dry-run"],"fullName":"worker health dry-run returns skip status without Redis","status":"passed","title":"returns skip status without Redis","duration":1.363299999999981,"failureMessages":[],"meta":{}}],"startTime":1767034179118,"endTime":1767034179119.3633,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/worker-health.test.ts"},{"assertionResults":[{"ancestorTitles":["Worker Job Processing Integration","SLA Breach Job Processing"],"fullName":"Worker Job Processing Integration SLA Breach Job Processing processes first-response breach job successfully","status":"failed","title":"processes first-response breach job successfully","duration":10.161399999999958,"failureMessages":["ZodError: [\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/\",\n    \"path\": [\n      \"ticketId\"\n    ],\n    \"message\": \"Invalid UUID\"\n  }\n]\n    at handleSlaJob (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/sla-worker.ts:42:38)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/worker-job-processing-integration.test.ts:52:28\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1209:10)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1653:37\n    at Traces.$ (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)"],"meta":{}},{"ancestorTitles":["Worker Job Processing Integration","SLA Breach Job Processing"],"fullName":"Worker Job Processing Integration SLA Breach Job Processing processes resolve breach job successfully","status":"failed","title":"processes resolve breach job successfully","duration":0.943899999999303,"failureMessages":["ZodError: [\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/\",\n    \"path\": [\n      \"ticketId\"\n    ],\n    \"message\": \"Invalid UUID\"\n  }\n]\n    at handleSlaJob (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/sla-worker.ts:42:38)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/worker-job-processing-integration.test.ts:90:28\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1209:10)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1653:37\n    at Traces.$ (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)"],"meta":{}},{"ancestorTitles":["Worker Job Processing Integration","SLA Breach Job Processing"],"fullName":"Worker Job Processing Integration SLA Breach Job Processing skips job when ticket is closed","status":"failed","title":"skips job when ticket is closed","duration":1.0718999999999141,"failureMessages":["ZodError: [\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/\",\n    \"path\": [\n      \"ticketId\"\n    ],\n    \"message\": \"Invalid UUID\"\n  }\n]\n    at handleSlaJob (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/sla-worker.ts:42:38)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/worker-job-processing-integration.test.ts:121:28\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1209:10)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1653:37\n    at Traces.$ (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)"],"meta":{}},{"ancestorTitles":["Worker Job Processing Integration","SLA Breach Job Processing"],"fullName":"Worker Job Processing Integration SLA Breach Job Processing skips job when ticket is waiting on requester","status":"failed","title":"skips job when ticket is waiting on requester","duration":0.6932999999999083,"failureMessages":["ZodError: [\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/\",\n    \"path\": [\n      \"ticketId\"\n    ],\n    \"message\": \"Invalid UUID\"\n  }\n]\n    at handleSlaJob (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/sla-worker.ts:42:38)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/worker-job-processing-integration.test.ts:147:28\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1209:10)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1653:37\n    at Traces.$ (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)"],"meta":{}},{"ancestorTitles":["Worker Job Processing Integration","SLA Breach Job Processing"],"fullName":"Worker Job Processing Integration SLA Breach Job Processing skips job when first response already recorded","status":"failed","title":"skips job when first response already recorded","duration":0.7265999999999622,"failureMessages":["ZodError: [\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/\",\n    \"path\": [\n      \"ticketId\"\n    ],\n    \"message\": \"Invalid UUID\"\n  }\n]\n    at handleSlaJob (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/sla-worker.ts:42:38)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/worker-job-processing-integration.test.ts:171:28\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1209:10)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1653:37\n    at Traces.$ (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)"],"meta":{}},{"ancestorTitles":["Worker Job Processing Integration","SLA Breach Job Processing"],"fullName":"Worker Job Processing Integration SLA Breach Job Processing skips job when ticket is already resolved","status":"failed","title":"skips job when ticket is already resolved","duration":0.6213999999999942,"failureMessages":["ZodError: [\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/\",\n    \"path\": [\n      \"ticketId\"\n    ],\n    \"message\": \"Invalid UUID\"\n  }\n]\n    at handleSlaJob (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/sla-worker.ts:42:38)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/worker-job-processing-integration.test.ts:195:28\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1209:10)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1653:37\n    at Traces.$ (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)"],"meta":{}},{"ancestorTitles":["Worker Job Processing Integration","SLA Breach Job Processing"],"fullName":"Worker Job Processing Integration SLA Breach Job Processing skips job when due date not reached","status":"failed","title":"skips job when due date not reached","duration":0.7538000000004104,"failureMessages":["ZodError: [\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/\",\n    \"path\": [\n      \"ticketId\"\n    ],\n    \"message\": \"Invalid UUID\"\n  }\n]\n    at handleSlaJob (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/sla-worker.ts:42:38)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/worker-job-processing-integration.test.ts:220:28\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1209:10)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1653:37\n    at Traces.$ (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)"],"meta":{}},{"ancestorTitles":["Worker Job Processing Integration","SLA Breach Job Processing"],"fullName":"Worker Job Processing Integration SLA Breach Job Processing skips job when ticket not found","status":"failed","title":"skips job when ticket not found","duration":0.7894999999998618,"failureMessages":["ZodError: [\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/\",\n    \"path\": [\n      \"ticketId\"\n    ],\n    \"message\": \"Invalid UUID\"\n  }\n]\n    at handleSlaJob (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/sla-worker.ts:42:38)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/worker-job-processing-integration.test.ts:241:28\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1209:10)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1653:37\n    at Traces.$ (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)"],"meta":{}},{"ancestorTitles":["Worker Job Processing Integration","SLA Breach Job Processing"],"fullName":"Worker Job Processing Integration SLA Breach Job Processing skips job when due date was rescheduled","status":"failed","title":"skips job when due date was rescheduled","duration":0.7659999999996217,"failureMessages":["ZodError: [\n  {\n    \"origin\": \"string\",\n    \"code\": \"invalid_format\",\n    \"format\": \"uuid\",\n    \"pattern\": \"/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/\",\n    \"path\": [\n      \"ticketId\"\n    ],\n    \"message\": \"Invalid UUID\"\n  }\n]\n    at handleSlaJob (C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/sla-worker.ts:42:38)\n    at C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/worker-job-processing-integration.test.ts:265:28\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1209:10)\n    at file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/@vitest+runner@4.0.16/node_modules/@vitest/runner/dist/index.js:1653:37\n    at Traces.$ (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///C:/Users/kacpe/Documents/GitHub/HelpDeskApp/node_modules/.pnpm/vitest@4.0.16_@types+node@2_3cbf07d661c7b4999116bd0df03bc74b/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)"],"meta":{}},{"ancestorTitles":["Worker Job Processing Integration","SLA Reminder Job Processing"],"fullName":"Worker Job Processing Integration SLA Reminder Job Processing processes reminder job successfully","status":"passed","title":"processes reminder job successfully","duration":6.628399999999601,"failureMessages":[],"meta":{}},{"ancestorTitles":["Worker Job Processing Integration","SLA Reminder Job Processing"],"fullName":"Worker Job Processing Integration SLA Reminder Job Processing skips reminder when no recipient provided","status":"passed","title":"skips reminder when no recipient provided","duration":0.5547999999998865,"failureMessages":[],"meta":{}},{"ancestorTitles":["Worker Job Processing Integration","SLA Reminder Job Processing"],"fullName":"Worker Job Processing Integration SLA Reminder Job Processing skips reminder when job type is not reminder","status":"passed","title":"skips reminder when job type is not reminder","duration":0.3235999999997148,"failureMessages":[],"meta":{}}],"startTime":1767034145468,"endTime":1767034145493.3235,"status":"failed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/worker-job-processing-integration.test.ts"},{"assertionResults":[{"ancestorTitles":["recordAttachmentAudit"],"fullName":"recordAttachmentAudit persists audit event with redacted attachment metadata","status":"passed","title":"persists audit event with redacted attachment metadata","duration":4.856299999999919,"failureMessages":[],"meta":{}},{"ancestorTitles":["recordAttachmentAudit"],"fullName":"recordAttachmentAudit handles missing storagePath and attachment id","status":"passed","title":"handles missing storagePath and attachment id","duration":0.742200000000139,"failureMessages":[],"meta":{}}],"startTime":1767034168790,"endTime":1767034168795.7422,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/audit.test.ts"},{"assertionResults":[{"ancestorTitles":["authorization helpers"],"fullName":"authorization helpers derives ticket scope for requester","status":"passed","title":"derives ticket scope for requester","duration":2.64029999999957,"failureMessages":[],"meta":{}},{"ancestorTitles":["authorization helpers"],"fullName":"authorization helpers derives ticket scope for agent/admin by organization","status":"passed","title":"derives ticket scope for agent/admin by organization","duration":0.4507000000003245,"failureMessages":[],"meta":{}},{"ancestorTitles":["authorization helpers"],"fullName":"authorization helpers detects agent or admin roles","status":"passed","title":"detects agent or admin roles","duration":0.6257000000000517,"failureMessages":[],"meta":{}},{"ancestorTitles":["authorization helpers"],"fullName":"authorization helpers checks organization match only when present","status":"passed","title":"checks organization match only when present","duration":0.3587000000002263,"failureMessages":[],"meta":{}},{"ancestorTitles":["authorization helpers"],"fullName":"authorization helpers returns unauthorized response when session missing","status":"passed","title":"returns unauthorized response when session missing","duration":0.8504000000002634,"failureMessages":[],"meta":{}},{"ancestorTitles":["authorization helpers"],"fullName":"authorization helpers returns authenticated user when session present","status":"passed","title":"returns authenticated user when session present","duration":0.41329999999970823,"failureMessages":[],"meta":{}}],"startTime":1767034168395,"endTime":1767034168400.4133,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/authorization.test.ts"},{"assertionResults":[{"ancestorTitles":["runAttachmentScan"],"fullName":"runAttachmentScan persists clean status and fixtures metadata","status":"passed","title":"persists clean status and fixtures metadata","duration":5.7973000000001775,"failureMessages":[],"meta":{}},{"ancestorTitles":["runAttachmentScan"],"fullName":"runAttachmentScan stores signature when infected","status":"passed","title":"stores signature when infected","duration":0.5839000000000851,"failureMessages":[],"meta":{}}],"startTime":1767034167081,"endTime":1767034167087.584,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/av-scanner.test.ts"},{"assertionResults":[{"ancestorTitles":["error schema"],"fullName":"error schema validates a standard error response shape","status":"passed","title":"validates a standard error response shape","duration":6.917399999999816,"failureMessages":[],"meta":{}},{"ancestorTitles":["error schema"],"fullName":"error schema builds an error response object","status":"passed","title":"builds an error response object","duration":0.515400000000227,"failureMessages":[],"meta":{}},{"ancestorTitles":["error schema"],"fullName":"error schema fails validation when error message missing","status":"passed","title":"fails validation when error message missing","duration":0.9791999999997643,"failureMessages":[],"meta":{}}],"startTime":1767034165386,"endTime":1767034165393.9792,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/error-schema.test.ts"},{"assertionResults":[{"ancestorTitles":["createRequestLogger"],"fullName":"createRequestLogger logs structured output with request context","status":"passed","title":"logs structured output with request context","duration":5.128899999999703,"failureMessages":[],"meta":{}}],"startTime":1767034169386,"endTime":1767034169391.129,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/logger.test.ts"},{"assertionResults":[{"ancestorTitles":["notification preferences"],"fullName":"notification preferences returns all toggles enabled by default","status":"passed","title":"returns all toggles enabled by default","duration":1.8011000000001332,"failureMessages":[],"meta":{}}],"startTime":1767034178322,"endTime":1767034178323.801,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/notification-preferences.test.ts"},{"assertionResults":[{"ancestorTitles":["sanitizeMarkdown"],"fullName":"sanitizeMarkdown removes script blocks","status":"passed","title":"removes script blocks","duration":2.2182999999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitizeMarkdown"],"fullName":"sanitizeMarkdown strips event handlers and javascript urls","status":"passed","title":"strips event handlers and javascript urls","duration":0.5291999999999462,"failureMessages":[],"meta":{}}],"startTime":1767034175439,"endTime":1767034175442.5293,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/sanitize.test.ts"},{"assertionResults":[{"ancestorTitles":["getSlaStatus"],"fullName":"getSlaStatus returns healthy when resolved","status":"passed","title":"returns healthy when resolved","duration":1.4269999999996799,"failureMessages":[],"meta":{}},{"ancestorTitles":["getSlaStatus"],"fullName":"getSlaStatus flags breach on resolveDue past now","status":"passed","title":"flags breach on resolveDue past now","duration":0.6700000000000728,"failureMessages":[],"meta":{}},{"ancestorTitles":["getSlaStatus"],"fullName":"getSlaStatus flags breach on firstResponseDue past now without response","status":"passed","title":"flags breach on firstResponseDue past now without response","duration":0.639299999999821,"failureMessages":[],"meta":{}},{"ancestorTitles":["getSlaStatus"],"fullName":"getSlaStatus returns healthy with countdown when first response due upcoming","status":"passed","title":"returns healthy with countdown when first response due upcoming","duration":0.287199999999757,"failureMessages":[],"meta":{}},{"ancestorTitles":["getSlaStatus"],"fullName":"getSlaStatus returns healthy with countdown when resolve due upcoming after first response","status":"passed","title":"returns healthy with countdown when resolve due upcoming after first response","duration":0.2505999999998494,"failureMessages":[],"meta":{}}],"startTime":1767034163581,"endTime":1767034163584.287,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/src/lib/sla-status.test.ts"},{"assertionResults":[{"ancestorTitles":["OpenAPI baseline"],"fullName":"OpenAPI baseline docs/openapi.yaml is present and contains implemented paths","status":"passed","title":"docs/openapi.yaml is present and contains implemented paths","duration":3.036000000000058,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/tickets"],"fullName":"GET /api/tickets returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":5.976700000000164,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/tickets"],"fullName":"GET /api/tickets returns tickets with expanded relations for authenticated agent","status":"passed","title":"returns tickets with expanded relations for authenticated agent","duration":6.738900000000285,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets"],"fullName":"POST /api/tickets returns validation error for missing fields","status":"passed","title":"returns validation error for missing fields","duration":4.519499999999425,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets"],"fullName":"POST /api/tickets creates ticket with authenticated requester","status":"passed","title":"creates ticket with authenticated requester","duration":3.2582000000002154,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets"],"fullName":"POST /api/tickets sanitizes markdown before storing ticket","status":"passed","title":"sanitizes markdown before storing ticket","duration":1.5354999999999563,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets"],"fullName":"POST /api/tickets triggers automation hook with ticketCreated event","status":"passed","title":"triggers automation hook with ticketCreated event","duration":3.282499999999345,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/{id}/comments"],"fullName":"POST /api/tickets/{id}/comments returns 404 when ticket is missing","status":"passed","title":"returns 404 when ticket is missing","duration":1.5927999999994427,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/{id}/comments"],"fullName":"POST /api/tickets/{id}/comments creates comment for requester","status":"passed","title":"creates comment for requester","duration":1.7776999999996406,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/{id}/comments"],"fullName":"POST /api/tickets/{id}/comments sanitizes comment body on ingest","status":"passed","title":"sanitizes comment body on ingest","duration":1.602299999999559,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/users"],"fullName":"GET /api/admin/users returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":1.0328999999992448,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/users"],"fullName":"GET /api/admin/users returns 401 when user is not admin","status":"passed","title":"returns 401 when user is not admin","duration":0.922299999999268,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/users"],"fullName":"GET /api/admin/users returns users list for admin","status":"passed","title":"returns users list for admin","duration":0.9266000000006898,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/admin/users"],"fullName":"POST /api/admin/users returns 401 when user is not admin","status":"passed","title":"returns 401 when user is not admin","duration":1.0096000000003187,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/admin/users"],"fullName":"POST /api/admin/users returns validation error for missing fields","status":"passed","title":"returns validation error for missing fields","duration":1.4451000000008207,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/admin/users"],"fullName":"POST /api/admin/users returns validation error for invalid role","status":"passed","title":"returns validation error for invalid role","duration":2.056499999999687,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/admin/users"],"fullName":"POST /api/admin/users returns error when email already exists","status":"passed","title":"returns error when email already exists","duration":1.0083999999997104,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/admin/users"],"fullName":"POST /api/admin/users creates user successfully","status":"passed","title":"creates user successfully","duration":568.8011000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/users/[id]"],"fullName":"GET /api/admin/users/[id] returns 401 when user is not admin","status":"passed","title":"returns 401 when user is not admin","duration":1.5718999999999141,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/users/[id]"],"fullName":"GET /api/admin/users/[id] returns 404 when user not found","status":"passed","title":"returns 404 when user not found","duration":0.6275000000005093,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/users/[id]"],"fullName":"GET /api/admin/users/[id] returns user details for admin","status":"passed","title":"returns user details for admin","duration":0.574600000000828,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/admin/users/[id]"],"fullName":"PATCH /api/admin/users/[id] returns 401 when user is not admin","status":"passed","title":"returns 401 when user is not admin","duration":0.8043999999999869,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/admin/users/[id]"],"fullName":"PATCH /api/admin/users/[id] returns 404 when user not found","status":"passed","title":"returns 404 when user not found","duration":0.8800000000001091,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/admin/users/[id]"],"fullName":"PATCH /api/admin/users/[id] updates user successfully","status":"passed","title":"updates user successfully","duration":3.925299999999879,"failureMessages":[],"meta":{}},{"ancestorTitles":["DELETE /api/admin/users/[id]"],"fullName":"DELETE /api/admin/users/[id] returns 401 when user is not admin","status":"passed","title":"returns 401 when user is not admin","duration":0.8906999999999243,"failureMessages":[],"meta":{}},{"ancestorTitles":["DELETE /api/admin/users/[id]"],"fullName":"DELETE /api/admin/users/[id] returns 400 when trying to delete self","status":"passed","title":"returns 400 when trying to delete self","duration":0.6315999999997075,"failureMessages":[],"meta":{}},{"ancestorTitles":["DELETE /api/admin/users/[id]"],"fullName":"DELETE /api/admin/users/[id] returns 400 when user has active tickets","status":"passed","title":"returns 400 when user has active tickets","duration":0.5275000000001455,"failureMessages":[],"meta":{}},{"ancestorTitles":["DELETE /api/admin/users/[id]"],"fullName":"DELETE /api/admin/users/[id] deletes user successfully","status":"passed","title":"deletes user successfully","duration":4.434299999999894,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/tickets/{id}"],"fullName":"PATCH /api/tickets/{id} returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":1.3374000000003434,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/tickets/{id}"],"fullName":"PATCH /api/tickets/{id} returns 404 when ticket not found","status":"passed","title":"returns 404 when ticket not found","duration":0.5802999999996246,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/tickets/{id}"],"fullName":"PATCH /api/tickets/{id} returns 403 when requester tries to update other's ticket","status":"passed","title":"returns 403 when requester tries to update other's ticket","duration":0.5682999999999083,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/tickets/{id}"],"fullName":"PATCH /api/tickets/{id} returns 400 when no updates provided","status":"passed","title":"returns 400 when no updates provided","duration":5.317600000000311,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/tickets/{id}"],"fullName":"PATCH /api/tickets/{id} updates ticket successfully","status":"passed","title":"updates ticket successfully","duration":1.4377000000004045,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/{id}/attachments"],"fullName":"POST /api/tickets/{id}/attachments returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":5.335900000000038,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/{id}/attachments"],"fullName":"POST /api/tickets/{id}/attachments returns 404 when ticket not found","status":"passed","title":"returns 404 when ticket not found","duration":0.8090000000001965,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/{id}/attachments"],"fullName":"POST /api/tickets/{id}/attachments returns 403 when requester tries to upload to other's ticket","status":"passed","title":"returns 403 when requester tries to upload to other's ticket","duration":0.685099999999693,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/{id}/attachments"],"fullName":"POST /api/tickets/{id}/attachments creates attachment successfully","status":"passed","title":"creates attachment successfully","duration":3.832100000000537,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/tickets/{id}/attachments/{attachmentId}"],"fullName":"GET /api/tickets/{id}/attachments/{attachmentId} returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":0.8338999999996304,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/tickets/{id}/attachments/{attachmentId}"],"fullName":"GET /api/tickets/{id}/attachments/{attachmentId} returns 404 when attachment not found","status":"passed","title":"returns 404 when attachment not found","duration":0.5417999999999665,"failureMessages":[],"meta":{}},{"ancestorTitles":["DELETE /api/tickets/{id}/attachments"],"fullName":"DELETE /api/tickets/{id}/attachments returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":1.0702000000001135,"failureMessages":[],"meta":{}},{"ancestorTitles":["DELETE /api/tickets/{id}/attachments"],"fullName":"DELETE /api/tickets/{id}/attachments returns 404 when attachment not found","status":"passed","title":"returns 404 when attachment not found","duration":3.184900000000198,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/tickets/{id}/audit"],"fullName":"GET /api/tickets/{id}/audit returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":0.8117999999994936,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/tickets/{id}/audit"],"fullName":"GET /api/tickets/{id}/audit returns 404 when ticket not found","status":"passed","title":"returns 404 when ticket not found","duration":1.2826999999997497,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/tickets/{id}/audit"],"fullName":"GET /api/tickets/{id}/audit returns 403 when requester tries to access other's ticket","status":"passed","title":"returns 403 when requester tries to access other's ticket","duration":0.5199999999995271,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/tickets/{id}/audit"],"fullName":"GET /api/tickets/{id}/audit returns audit events successfully","status":"passed","title":"returns audit events successfully","duration":0.6504999999997381,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/{id}/csat"],"fullName":"POST /api/tickets/{id}/csat returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":1.3230000000003201,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/{id}/csat"],"fullName":"POST /api/tickets/{id}/csat returns 404 when ticket not found","status":"passed","title":"returns 404 when ticket not found","duration":4.617900000000191,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/{id}/csat"],"fullName":"POST /api/tickets/{id}/csat returns 400 when score is invalid","status":"passed","title":"returns 400 when score is invalid","duration":1.0007999999997992,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/tickets/bulk"],"fullName":"PATCH /api/tickets/bulk returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":0.8811000000005151,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/tickets/bulk"],"fullName":"PATCH /api/tickets/bulk returns 403 when user is not agent/admin","status":"passed","title":"returns 403 when user is not agent/admin","duration":3.9947000000001935,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/tickets/bulk"],"fullName":"PATCH /api/tickets/bulk returns 400 when validation fails","status":"passed","title":"returns 400 when validation fails","duration":1.5082999999995081,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/teams"],"fullName":"GET /api/admin/teams returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":0.8105999999997948,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/teams"],"fullName":"GET /api/admin/teams returns 401 when user is not admin","status":"passed","title":"returns 401 when user is not admin","duration":0.5923000000002503,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/teams"],"fullName":"GET /api/admin/teams returns teams list for admin","status":"passed","title":"returns teams list for admin","duration":4.523200000000543,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/admin/teams"],"fullName":"POST /api/admin/teams returns 401 when user is not admin","status":"passed","title":"returns 401 when user is not admin","duration":0.8684999999995853,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/admin/teams"],"fullName":"POST /api/admin/teams returns 400 when name is missing","status":"passed","title":"returns 400 when name is missing","duration":0.6080000000001746,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/admin/teams"],"fullName":"POST /api/admin/teams creates team successfully","status":"passed","title":"creates team successfully","duration":0.7325000000000728,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/teams/[id]"],"fullName":"GET /api/admin/teams/[id] returns 401 when user is not admin","status":"passed","title":"returns 401 when user is not admin","duration":0.3493000000007669,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/teams/[id]"],"fullName":"GET /api/admin/teams/[id] returns 404 when team not found","status":"passed","title":"returns 404 when team not found","duration":2.1995999999999185,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/admin/teams/[id]"],"fullName":"PATCH /api/admin/teams/[id] returns 401 when user is not admin","status":"passed","title":"returns 401 when user is not admin","duration":0.3561999999992622,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/admin/teams/[id]"],"fullName":"PATCH /api/admin/teams/[id] returns 404 when team not found","status":"passed","title":"returns 404 when team not found","duration":0.49790000000029977,"failureMessages":[],"meta":{}},{"ancestorTitles":["DELETE /api/admin/teams/[id]"],"fullName":"DELETE /api/admin/teams/[id] returns 401 when user is not admin","status":"passed","title":"returns 401 when user is not admin","duration":0.3019000000003871,"failureMessages":[],"meta":{}},{"ancestorTitles":["DELETE /api/admin/teams/[id]"],"fullName":"DELETE /api/admin/teams/[id] returns 404 when team not found","status":"passed","title":"returns 404 when team not found","duration":0.20560000000023138,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/teams/[id]/memberships"],"fullName":"GET /api/admin/teams/[id]/memberships returns 401 when user is not admin","status":"skipped","title":"returns 401 when user is not admin","failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/teams/[id]/memberships"],"fullName":"GET /api/admin/teams/[id]/memberships returns 404 when team not found","status":"skipped","title":"returns 404 when team not found","failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/admin/teams/[id]/memberships"],"fullName":"POST /api/admin/teams/[id]/memberships returns 401 when user is not admin","status":"passed","title":"returns 401 when user is not admin","duration":0.35390000000006694,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/admin/teams/[id]/memberships"],"fullName":"POST /api/admin/teams/[id]/memberships returns 404 when team not found","status":"passed","title":"returns 404 when team not found","duration":0.24130000000059226,"failureMessages":[],"meta":{}},{"ancestorTitles":["DELETE /api/admin/teams/[id]/memberships"],"fullName":"DELETE /api/admin/teams/[id]/memberships returns 401 when user is not admin","status":"passed","title":"returns 401 when user is not admin","duration":0.19880000000011933,"failureMessages":[],"meta":{}},{"ancestorTitles":["DELETE /api/admin/teams/[id]/memberships"],"fullName":"DELETE /api/admin/teams/[id]/memberships returns 404 when team not found","status":"passed","title":"returns 404 when team not found","duration":0.15410000000065338,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/audit-events"],"fullName":"GET /api/admin/audit-events returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":0.5419000000001688,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/audit-events"],"fullName":"GET /api/admin/audit-events returns 403 when user is not admin","status":"passed","title":"returns 403 when user is not admin","duration":0.4400999999998021,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/audit-events"],"fullName":"GET /api/admin/audit-events returns audit events for admin","status":"passed","title":"returns audit events for admin","duration":1.3145999999997002,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/automation-rules"],"fullName":"GET /api/admin/automation-rules returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":2.3935999999994237,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/automation-rules"],"fullName":"GET /api/admin/automation-rules returns 403 when user is not admin","status":"passed","title":"returns 403 when user is not admin","duration":0.7638999999999214,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/admin/automation-rules"],"fullName":"POST /api/admin/automation-rules returns 401 when user is not admin","status":"passed","title":"returns 401 when user is not admin","duration":0.8176000000003114,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/admin/automation-rules"],"fullName":"POST /api/admin/automation-rules returns 400 when validation fails","status":"passed","title":"returns 400 when validation fails","duration":1.0410999999994601,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/admin/automation-rules/[id]"],"fullName":"PATCH /api/admin/automation-rules/[id] returns 401 when user is not admin","status":"passed","title":"returns 401 when user is not admin","duration":0.7581999999993059,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/admin/automation-rules/[id]"],"fullName":"PATCH /api/admin/automation-rules/[id] returns 404 when rule not found","status":"passed","title":"returns 404 when rule not found","duration":0.6027999999996609,"failureMessages":[],"meta":{}},{"ancestorTitles":["DELETE /api/admin/automation-rules/[id]"],"fullName":"DELETE /api/admin/automation-rules/[id] returns 401 when user is not admin","status":"passed","title":"returns 401 when user is not admin","duration":0.5919999999996435,"failureMessages":[],"meta":{}},{"ancestorTitles":["DELETE /api/admin/automation-rules/[id]"],"fullName":"DELETE /api/admin/automation-rules/[id] returns 404 when rule not found","status":"passed","title":"returns 404 when rule not found","duration":1.925000000000182,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/sla-policies"],"fullName":"GET /api/admin/sla-policies returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":1.2194999999992433,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/admin/sla-policies"],"fullName":"GET /api/admin/sla-policies returns 403 when user is not admin","status":"passed","title":"returns 403 when user is not admin","duration":1.2259000000003653,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/admin/sla-policies"],"fullName":"POST /api/admin/sla-policies returns 401 when user is not admin","status":"passed","title":"returns 401 when user is not admin","duration":1.3449000000000524,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/admin/sla-policies"],"fullName":"POST /api/admin/sla-policies returns 400 when validation fails","status":"passed","title":"returns 400 when validation fails","duration":5.317000000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/admin/sla-policies/[id]"],"fullName":"PATCH /api/admin/sla-policies/[id] returns 401 when user is not admin","status":"passed","title":"returns 401 when user is not admin","duration":0.988100000000486,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/admin/sla-policies/[id]"],"fullName":"PATCH /api/admin/sla-policies/[id] returns 404 when policy not found","status":"passed","title":"returns 404 when policy not found","duration":0.6316999999999098,"failureMessages":[],"meta":{}},{"ancestorTitles":["DELETE /api/admin/sla-policies/[id]"],"fullName":"DELETE /api/admin/sla-policies/[id] returns 401 when user is not admin","status":"passed","title":"returns 401 when user is not admin","duration":0.5979999999999563,"failureMessages":[],"meta":{}},{"ancestorTitles":["DELETE /api/admin/sla-policies/[id]"],"fullName":"DELETE /api/admin/sla-policies/[id] returns 404 when policy not found","status":"passed","title":"returns 404 when policy not found","duration":0.9214999999994689,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/notifications"],"fullName":"GET /api/notifications returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":3.395400000000336,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/notifications"],"fullName":"GET /api/notifications returns notifications successfully","status":"passed","title":"returns notifications successfully","duration":0.8460999999997512,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/notifications/[id]/read"],"fullName":"PATCH /api/notifications/[id]/read returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":0.3800999999994019,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/notifications/[id]/read"],"fullName":"PATCH /api/notifications/[id]/read returns 404 when notification not found","status":"passed","title":"returns 404 when notification not found","duration":0.25389999999970314,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/views"],"fullName":"GET /api/views returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":0.6925000000001091,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/views"],"fullName":"GET /api/views returns views successfully","status":"passed","title":"returns views successfully","duration":2.486399999999776,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/views"],"fullName":"POST /api/views returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":1.0078000000003158,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/views"],"fullName":"POST /api/views returns 400 when validation fails","status":"passed","title":"returns 400 when validation fails","duration":1.1911999999992986,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/views/[id]"],"fullName":"PATCH /api/views/[id] returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":0.7188999999998487,"failureMessages":[],"meta":{}},{"ancestorTitles":["PATCH /api/views/[id]"],"fullName":"PATCH /api/views/[id] returns 404 when view not found","status":"passed","title":"returns 404 when view not found","duration":0.6716999999998734,"failureMessages":[],"meta":{}},{"ancestorTitles":["DELETE /api/views/[id]"],"fullName":"DELETE /api/views/[id] returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":4.364300000000185,"failureMessages":[],"meta":{}},{"ancestorTitles":["DELETE /api/views/[id]"],"fullName":"DELETE /api/views/[id] returns 404 when view not found","status":"passed","title":"returns 404 when view not found","duration":0.67870000000039,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/views/[id]/set-default"],"fullName":"POST /api/views/[id]/set-default returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":0.6397999999999229,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/views/[id]/set-default"],"fullName":"POST /api/views/[id]/set-default returns 404 when view not found","status":"passed","title":"returns 404 when view not found","duration":0.461699999999837,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/kpi"],"fullName":"GET /api/reports/kpi returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":0.6588999999994485,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/kpi"],"fullName":"GET /api/reports/kpi returns 403 when user is not admin","status":"passed","title":"returns 403 when user is not admin","duration":2.5676000000003114,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/analytics"],"fullName":"GET /api/reports/analytics returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":1.7542999999996027,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/analytics"],"fullName":"GET /api/reports/analytics returns 403 when user is not admin","status":"passed","title":"returns 403 when user is not admin","duration":0.615299999999479,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/csat"],"fullName":"GET /api/reports/csat returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":0.31710000000020955,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/csat"],"fullName":"GET /api/reports/csat returns 403 when user is not admin","status":"passed","title":"returns 403 when user is not admin","duration":0.1977999999999156,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/export/tickets"],"fullName":"GET /api/reports/export/tickets returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":0.3164999999999054,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/export/tickets"],"fullName":"GET /api/reports/export/tickets returns 403 when user is requester","status":"passed","title":"returns 403 when user is requester","duration":0.2128999999995358,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/export/comments"],"fullName":"GET /api/reports/export/comments returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":0.2879000000002634,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/categories"],"fullName":"GET /api/categories returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":3.7596999999996115,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/categories"],"fullName":"GET /api/categories returns categories successfully","status":"passed","title":"returns categories successfully","duration":1.1036000000003696,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/tags"],"fullName":"GET /api/tags returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":0.5978999999997541,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/tags"],"fullName":"GET /api/tags returns tags successfully","status":"passed","title":"returns tags successfully","duration":0.7831999999998516,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/sla/preview"],"fullName":"POST /api/sla/preview returns 401 when session is missing","status":"passed","title":"returns 401 when session is missing","duration":0.6107999999994718,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/sla/preview"],"fullName":"POST /api/sla/preview returns 400 when validation fails","status":"passed","title":"returns 400 when validation fails","duration":4.444599999999809,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/health"],"fullName":"GET /api/health returns health status","status":"passed","title":"returns health status","duration":1.0972000000001572,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/{id}/attachments - Additional Tests"],"fullName":"POST /api/tickets/{id}/attachments - Additional Tests returns 400 when file size exceeds limit","status":"passed","title":"returns 400 when file size exceeds limit","duration":0.9551000000001295,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/{id}/attachments - Additional Tests"],"fullName":"POST /api/tickets/{id}/attachments - Additional Tests returns 400 when MIME type is not allowed","status":"passed","title":"returns 400 when MIME type is not allowed","duration":3.587999999999738,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/{id}/attachments - Additional Tests"],"fullName":"POST /api/tickets/{id}/attachments - Additional Tests returns 400 when validation schema fails","status":"passed","title":"returns 400 when validation schema fails","duration":1.6779999999998836,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/tickets/{id}/attachments/{attachmentId} - Additional Tests"],"fullName":"GET /api/tickets/{id}/attachments/{attachmentId} - Additional Tests returns attachment with download URL successfully","status":"passed","title":"returns attachment with download URL successfully","duration":0.7794000000003507,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/tickets/{id}/attachments/{attachmentId} - Additional Tests"],"fullName":"GET /api/tickets/{id}/attachments/{attachmentId} - Additional Tests returns 403 when requester tries to access other's ticket attachment","status":"passed","title":"returns 403 when requester tries to access other's ticket attachment","duration":0.6588000000001557,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/tickets/{id}/attachments/{attachmentId} - Additional Tests"],"fullName":"GET /api/tickets/{id}/attachments/{attachmentId} - Additional Tests returns 404 when attachment belongs to different ticket","status":"passed","title":"returns 404 when attachment belongs to different ticket","duration":0.49909999999999854,"failureMessages":[],"meta":{}},{"ancestorTitles":["DELETE /api/tickets/{id}/attachments - Additional Tests"],"fullName":"DELETE /api/tickets/{id}/attachments - Additional Tests deletes attachment successfully as agent","status":"passed","title":"deletes attachment successfully as agent","duration":4.518399999999929,"failureMessages":[],"meta":{}},{"ancestorTitles":["DELETE /api/tickets/{id}/attachments - Additional Tests"],"fullName":"DELETE /api/tickets/{id}/attachments - Additional Tests returns 400 when attachmentId is missing","status":"passed","title":"returns 400 when attachmentId is missing","duration":0.9221999999999753,"failureMessages":[],"meta":{}},{"ancestorTitles":["DELETE /api/tickets/{id}/attachments - Additional Tests"],"fullName":"DELETE /api/tickets/{id}/attachments - Additional Tests returns 403 when requester tries to delete attachment they didn't upload","status":"passed","title":"returns 403 when requester tries to delete attachment they didn't upload","duration":1.1332000000002154,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/tickets/{id}/audit - Additional Tests"],"fullName":"GET /api/tickets/{id}/audit - Additional Tests returns empty audit events array when no events exist","status":"passed","title":"returns empty audit events array when no events exist","duration":3.3029999999998836,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/tickets/{id}/audit - Additional Tests"],"fullName":"GET /api/tickets/{id}/audit - Additional Tests returns audit events with proper structure","status":"passed","title":"returns audit events with proper structure","duration":2.40270000000055,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/{id}/csat - Additional Tests"],"fullName":"POST /api/tickets/{id}/csat - Additional Tests submits CSAT successfully with valid token","status":"passed","title":"submits CSAT successfully with valid token","duration":1.1898999999993976,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/{id}/csat - Additional Tests"],"fullName":"POST /api/tickets/{id}/csat - Additional Tests returns 401 when token is invalid","status":"passed","title":"returns 401 when token is invalid","duration":3.0132000000003245,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/{id}/csat - Additional Tests"],"fullName":"POST /api/tickets/{id}/csat - Additional Tests returns 403 when token doesn't match ticket ID","status":"passed","title":"returns 403 when token doesn't match ticket ID","duration":3.0523000000002867,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/{id}/csat - Additional Tests"],"fullName":"POST /api/tickets/{id}/csat - Additional Tests returns 409 when CSAT already submitted","status":"passed","title":"returns 409 when CSAT already submitted","duration":1.0308999999997468,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/{id}/csat - Additional Tests"],"fullName":"POST /api/tickets/{id}/csat - Additional Tests submits CSAT successfully with session authentication","status":"passed","title":"submits CSAT successfully with session authentication","duration":5.543099999999868,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/tickets/{id}/csat - Additional Tests"],"fullName":"POST /api/tickets/{id}/csat - Additional Tests returns 400 when score is out of range","status":"passed","title":"returns 400 when score is out of range","duration":1.0725000000002183,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/kpi - Additional Tests"],"fullName":"GET /api/reports/kpi - Additional Tests returns KPI metrics successfully","status":"passed","title":"returns KPI metrics successfully","duration":0.36600000000089494,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/kpi - Additional Tests"],"fullName":"GET /api/reports/kpi - Additional Tests returns 400 when date range is invalid","status":"passed","title":"returns 400 when date range is invalid","duration":0.22199999999975262,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/kpi - Additional Tests"],"fullName":"GET /api/reports/kpi - Additional Tests returns 400 when date format is invalid","status":"passed","title":"returns 400 when date format is invalid","duration":3.8431000000000495,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/analytics - Additional Tests"],"fullName":"GET /api/reports/analytics - Additional Tests returns analytics successfully","status":"passed","title":"returns analytics successfully","duration":23.617099999999482,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/analytics - Additional Tests"],"fullName":"GET /api/reports/analytics - Additional Tests returns 400 when startDate is after endDate","status":"passed","title":"returns 400 when startDate is after endDate","duration":1.3059000000002925,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/analytics - Additional Tests"],"fullName":"GET /api/reports/analytics - Additional Tests clamps days parameter to valid range","status":"passed","title":"clamps days parameter to valid range","duration":1.4445999999998094,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/csat - Additional Tests"],"fullName":"GET /api/reports/csat - Additional Tests returns CSAT analytics successfully","status":"passed","title":"returns CSAT analytics successfully","duration":1.819800000000214,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/csat - Additional Tests"],"fullName":"GET /api/reports/csat - Additional Tests returns 400 when date range is invalid","status":"passed","title":"returns 400 when date range is invalid","duration":0.6477999999997337,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/export/tickets - Additional Tests"],"fullName":"GET /api/reports/export/tickets - Additional Tests exports tickets as CSV successfully","status":"passed","title":"exports tickets as CSV successfully","duration":0.3743000000004031,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/export/tickets - Additional Tests"],"fullName":"GET /api/reports/export/tickets - Additional Tests returns 400 when query parameters are invalid","status":"passed","title":"returns 400 when query parameters are invalid","duration":0.3028999999996813,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/export/comments - Additional Tests"],"fullName":"GET /api/reports/export/comments - Additional Tests exports comments as CSV successfully","status":"passed","title":"exports comments as CSV successfully","duration":0.3514000000004671,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/export/comments - Additional Tests"],"fullName":"GET /api/reports/export/comments - Additional Tests returns 404 when ticket not found or access denied","status":"passed","title":"returns 404 when ticket not found or access denied","duration":0.33849999999983993,"failureMessages":[],"meta":{}},{"ancestorTitles":["GET /api/reports/export/comments - Additional Tests"],"fullName":"GET /api/reports/export/comments - Additional Tests filters out internal comments for requesters","status":"passed","title":"filters out internal comments for requesters","duration":0.2353000000002794,"failureMessages":[],"meta":{}}],"startTime":1767034155764,"endTime":1767034156581.3384,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/contract/api-contract.test.ts"},{"assertionResults":[{"ancestorTitles":["Input Validation Security Tests","Ticket Creation - Max Length Validation"],"fullName":"Input Validation Security Tests Ticket Creation - Max Length Validation rejects title that is too short","status":"passed","title":"rejects title that is too short","duration":12.41720000000032,"failureMessages":[],"meta":{}},{"ancestorTitles":["Input Validation Security Tests","Ticket Creation - Max Length Validation"],"fullName":"Input Validation Security Tests Ticket Creation - Max Length Validation rejects description that is too short","status":"passed","title":"rejects description that is too short","duration":1.6586999999999534,"failureMessages":[],"meta":{}},{"ancestorTitles":["Input Validation Security Tests","Ticket Creation - Max Length Validation"],"fullName":"Input Validation Security Tests Ticket Creation - Max Length Validation accepts valid ticket creation input","status":"passed","title":"accepts valid ticket creation input","duration":2.5889000000001943,"failureMessages":[],"meta":{}},{"ancestorTitles":["Input Validation Security Tests","Comment Creation - Max Length Validation"],"fullName":"Input Validation Security Tests Comment Creation - Max Length Validation rejects comment body that exceeds max length","status":"passed","title":"rejects comment body that exceeds max length","duration":2.4205000000001746,"failureMessages":[],"meta":{}},{"ancestorTitles":["Input Validation Security Tests","Comment Creation - Max Length Validation"],"fullName":"Input Validation Security Tests Comment Creation - Max Length Validation rejects empty comment body","status":"passed","title":"rejects empty comment body","duration":1.3172000000004118,"failureMessages":[],"meta":{}},{"ancestorTitles":["Input Validation Security Tests","Comment Creation - Max Length Validation"],"fullName":"Input Validation Security Tests Comment Creation - Max Length Validation accepts comment body within max length","status":"passed","title":"accepts comment body within max length","duration":1.3729000000002998,"failureMessages":[],"meta":{}},{"ancestorTitles":["Input Validation Security Tests","User Creation - Max Length Validation"],"fullName":"Input Validation Security Tests User Creation - Max Length Validation rejects name that exceeds max length","status":"passed","title":"rejects name that exceeds max length","duration":4.021300000000338,"failureMessages":[],"meta":{}},{"ancestorTitles":["Input Validation Security Tests","User Creation - Max Length Validation"],"fullName":"Input Validation Security Tests User Creation - Max Length Validation rejects password that is too short","status":"passed","title":"rejects password that is too short","duration":1.1264999999998508,"failureMessages":[],"meta":{}},{"ancestorTitles":["Input Validation Security Tests","User Creation - Max Length Validation"],"fullName":"Input Validation Security Tests User Creation - Max Length Validation rejects password that exceeds max length","status":"passed","title":"rejects password that exceeds max length","duration":0.8751999999999498,"failureMessages":[],"meta":{}},{"ancestorTitles":["Input Validation Security Tests","User Creation - Max Length Validation"],"fullName":"Input Validation Security Tests User Creation - Max Length Validation rejects invalid email format","status":"passed","title":"rejects invalid email format","duration":0.9982999999997446,"failureMessages":[],"meta":{}},{"ancestorTitles":["Input Validation Security Tests","XSS Payload Rejection"],"fullName":"Input Validation Security Tests XSS Payload Rejection XSS script tags in ticket title should be sanitized","status":"passed","title":"XSS script tags in ticket title should be sanitized","duration":1.7430999999996857,"failureMessages":[],"meta":{}},{"ancestorTitles":["Input Validation Security Tests","XSS Payload Rejection"],"fullName":"Input Validation Security Tests XSS Payload Rejection XSS script tags in comment body should be sanitized","status":"passed","title":"XSS script tags in comment body should be sanitized","duration":10.162499999999909,"failureMessages":[],"meta":{}},{"ancestorTitles":["Input Validation Security Tests","XSS Payload Rejection"],"fullName":"Input Validation Security Tests XSS Payload Rejection XSS event handlers in markdown should be sanitized","status":"passed","title":"XSS event handlers in markdown should be sanitized","duration":1.8213999999998123,"failureMessages":[],"meta":{}},{"ancestorTitles":["Input Validation Security Tests","Request Size Limits"],"fullName":"Input Validation Security Tests Request Size Limits rejects extremely large request body","status":"passed","title":"rejects extremely large request body","duration":13.35629999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["Input Validation Security Tests","Type Validation"],"fullName":"Input Validation Security Tests Type Validation rejects invalid priority enum value","status":"passed","title":"rejects invalid priority enum value","duration":1.7340999999996711,"failureMessages":[],"meta":{}},{"ancestorTitles":["Input Validation Security Tests","Type Validation"],"fullName":"Input Validation Security Tests Type Validation rejects invalid role enum value","status":"passed","title":"rejects invalid role enum value","duration":1.176300000000083,"failureMessages":[],"meta":{}},{"ancestorTitles":["Input Validation Security Tests","Type Validation"],"fullName":"Input Validation Security Tests Type Validation rejects non-boolean isInternal value","status":"passed","title":"rejects non-boolean isInternal value","duration":12.964800000000196,"failureMessages":[],"meta":{}}],"startTime":1767034153881,"endTime":1767034153953.9648,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/security/input-validation.test.ts"},{"assertionResults":[{"ancestorTitles":["Rate Limiting Security Tests","Rate Limit Enforcement"],"fullName":"Rate Limiting Security Tests Rate Limit Enforcement allows requests within limit","status":"passed","title":"allows requests within limit","duration":12.21810000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiting Security Tests","Rate Limit Enforcement"],"fullName":"Rate Limiting Security Tests Rate Limit Enforcement blocks requests exceeding limit","status":"passed","title":"blocks requests exceeding limit","duration":15.661000000000058,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiting Security Tests","Rate Limit Enforcement"],"fullName":"Rate Limiting Security Tests Rate Limit Enforcement uses per-route configuration for auth:login","status":"passed","title":"uses per-route configuration for auth:login","duration":1.3947000000002845,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiting Security Tests","Rate Limit Enforcement"],"fullName":"Rate Limiting Security Tests Rate Limit Enforcement uses per-route configuration for tickets:create","status":"passed","title":"uses per-route configuration for tickets:create","duration":3.7851000000000568,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiting Security Tests","Rate Limit Enforcement"],"fullName":"Rate Limiting Security Tests Rate Limit Enforcement uses per-route configuration for comments:create","status":"passed","title":"uses per-route configuration for comments:create","duration":2.9664999999999964,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiting Security Tests","Rate Limit Enforcement"],"fullName":"Rate Limiting Security Tests Rate Limit Enforcement uses per-route configuration for tickets:bulk","status":"passed","title":"uses per-route configuration for tickets:bulk","duration":1.4553999999998268,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiting Security Tests","Rate Limit Enforcement"],"fullName":"Rate Limiting Security Tests Rate Limit Enforcement tracks different IPs separately","status":"passed","title":"tracks different IPs separately","duration":0.8197000000000116,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiting Security Tests","Rate Limit Enforcement"],"fullName":"Rate Limiting Security Tests Rate Limit Enforcement tracks different routes separately","status":"passed","title":"tracks different routes separately","duration":1.1533999999996922,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiting Security Tests","Rate Limit Enforcement"],"fullName":"Rate Limiting Security Tests Rate Limit Enforcement allows requests when rate limiting is disabled","status":"passed","title":"allows requests when rate limiting is disabled","duration":3.3542999999999665,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiting Security Tests","Rate Limit Enforcement"],"fullName":"Rate Limiting Security Tests Rate Limit Enforcement allows requests for disabled routes","status":"passed","title":"allows requests for disabled routes","duration":3.578200000000379,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiting Security Tests","Rate Limit Enforcement"],"fullName":"Rate Limiting Security Tests Rate Limit Enforcement uses custom identifier when provided","status":"passed","title":"uses custom identifier when provided","duration":0.48720000000002983,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiting Security Tests","Rate Limit Headers"],"fullName":"Rate Limiting Security Tests Rate Limit Headers includes Retry-After header when blocked","status":"passed","title":"includes Retry-After header when blocked","duration":1.3307999999997264,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiting Security Tests","Rate Limit Headers"],"fullName":"Rate Limiting Security Tests Rate Limit Headers includes X-RateLimit-Remaining header when blocked","status":"passed","title":"includes X-RateLimit-Remaining header when blocked","duration":0.7826999999997497,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiting Security Tests","Rate Limit Headers"],"fullName":"Rate Limiting Security Tests Rate Limit Headers includes X-RateLimit-Reset header when blocked","status":"passed","title":"includes X-RateLimit-Reset header when blocked","duration":0.8735000000001492,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiting Security Tests","Rate Limit Headers"],"fullName":"Rate Limiting Security Tests Rate Limit Headers includes X-RateLimit-Limit header when blocked","status":"passed","title":"includes X-RateLimit-Limit header when blocked","duration":0.7898000000000138,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiting Security Tests","Rate Limit Headers"],"fullName":"Rate Limiting Security Tests Rate Limit Headers Retry-After is calculated correctly","status":"passed","title":"Retry-After is calculated correctly","duration":1.6289999999999054,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiting Security Tests","Rate Limit Window Management"],"fullName":"Rate Limiting Security Tests Rate Limit Window Management resets count after window expires","status":"passed","title":"resets count after window expires","duration":18.243099999999686,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiting Security Tests","Rate Limit Window Management"],"fullName":"Rate Limiting Security Tests Rate Limit Window Management maintains separate windows for different routes","status":"passed","title":"maintains separate windows for different routes","duration":0.5111000000001695,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiting Security Tests","Per-User Rate Limiting"],"fullName":"Rate Limiting Security Tests Per-User Rate Limiting tracks rate limits per user identifier","status":"passed","title":"tracks rate limits per user identifier","duration":0.8527000000003682,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiting Security Tests","Per-User Rate Limiting"],"fullName":"Rate Limiting Security Tests Per-User Rate Limiting per-user limits are independent of IP limits","status":"passed","title":"per-user limits are independent of IP limits","duration":4.208999999999833,"failureMessages":[],"meta":{}}],"startTime":1767034153598,"endTime":1767034153675.209,"status":"passed","message":"","name":"C:/Users/kacpe/Documents/GitHub/HelpDeskApp/tests/security/rate-limiting.test.ts"}]}