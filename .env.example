# =============================================================================
# HelpDeskApp Environment Variables
# =============================================================================
# Copy this file to .env.local (for local development) or .env (for production)
# and fill in the actual values. Never commit .env or .env.local to version control.
# =============================================================================

# -----------------------------------------------------------------------------
# REQUIRED VARIABLES
# -----------------------------------------------------------------------------
# These must be set before the application can run.

# Database Connection
# PostgreSQL connection string in the format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://user:password@localhost:5432/helpdesk

# NextAuth Authentication
# Generate a strong random secret: openssl rand -base64 32
# This is used to sign and encrypt cookies and tokens
NEXTAUTH_SECRET=your-secret-key-here-generate-with-openssl-rand-base64-32

# NextAuth Base URL
# The canonical URL of your application (no trailing slash)
# For local development: http://localhost:3000
# For production: https://your-domain.com
NEXTAUTH_URL=http://localhost:3000

# Node Environment
# Set to ''production'' for production deployments, ''development'' for local dev
NODE_ENV=development

# -----------------------------------------------------------------------------
# WORKER CONFIGURATION
# -----------------------------------------------------------------------------
# Configuration for the background worker process that handles jobs (SLA monitoring, notifications)

# Redis Connection URL
# Redis connection string for BullMQ job queue
# Format: redis://[password@]host:port[/database]
REDIS_URL=redis://localhost:6379

# BullMQ Queue Name
# Name of the default job queue
BULLMQ_QUEUE=helpdesk-default

# BullMQ Key Prefix
# Prefix for all Redis keys used by BullMQ
BULLMQ_PREFIX=helpdesk

# Worker Concurrency
# Number of jobs the worker can process simultaneously
WORKER_CONCURRENCY=5

# Worker Max Attempts
# Maximum number of retry attempts for failed jobs
WORKER_MAX_ATTEMPTS=3

# Worker Backoff Delay
# Delay in milliseconds between retry attempts
WORKER_BACKOFF_MS=5000

# Worker Dead Letter Queue Enabled
# Enable dead letter queue for permanently failed jobs (true/false)
WORKER_DLQ_ENABLED=true

# Worker Dead Letter Queue Name
# Name of the dead letter queue for failed jobs
WORKER_DLQ_NAME=helpdesk-default-dlq

# Worker Dry Run Mode
# Enable dry run mode to test worker without executing jobs (true/false)
WORKER_DRY_RUN=false

# Worker Health Check Dry Run
# Enable dry run mode for health check command (true/false)
WORKER_HEALTH_DRY_RUN=false

# Worker Health Check Sample Failed
# Number of failed jobs to sample in health check
WORKER_HEALTH_SAMPLE_FAILED=3

# -----------------------------------------------------------------------------
# EMAIL CONFIGURATION
# -----------------------------------------------------------------------------
# SMTP settings for sending email notifications

# Email Enabled
# Enable or disable email notifications (true/false)
EMAIL_ENABLED=false

# SMTP Host
# SMTP server hostname
SMTP_HOST=smtp.example.com

# SMTP Port
# SMTP server port (typically 587 for TLS, 465 for SSL, 25 for unencrypted)
SMTP_PORT=587

# SMTP User
# SMTP authentication username
SMTP_USER=your-smtp-user

# SMTP Password
# SMTP authentication password (SECRET - keep secure)
SMTP_PASSWORD=your-smtp-password

# SMTP From Address
# Default sender email address for notifications
SMTP_FROM=noreply@your-domain.com

# -----------------------------------------------------------------------------
# STORAGE CONFIGURATION
# -----------------------------------------------------------------------------
# Configuration for file attachment storage

# Storage Base URL
# Base URL for accessing stored files (no trailing slash)
# For local storage: http://localhost:3000/uploads
# For MinIO/S3: http://minio:9000 or https://your-s3-bucket.s3.amazonaws.com
STORAGE_BASE_URL=http://localhost:3000/uploads

# MinIO Endpoint (Optional - for future S3 integration)
# MinIO server endpoint URL
# MINIO_ENDPOINT=http://localhost:9000

# MinIO Access Key (Optional - for future S3 integration)
# MinIO access key for authentication
# MINIO_ACCESS_KEY=minioadmin

# MinIO Secret Key (Optional - for future S3 integration)
# MinIO secret key for authentication (SECRET - keep secure)
# MINIO_SECRET_KEY=minioadmin

# MinIO Root User (Docker Compose only)
# Root username for MinIO service (used by docker-compose.yml)
# MINIO_ROOT_USER=minio

# MinIO Root Password (Docker Compose only)
# Root password for MinIO service (SECRET - keep secure, used by docker-compose.yml)
# MINIO_ROOT_PASSWORD=minio-minio

# MinIO Browser Redirect URL (Docker Compose only)
# URL for MinIO web console (used by docker-compose.yml)
# MINIO_BROWSER_REDIRECT_URL=http://localhost:9001

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
# Configuration for API rate limiting

# Rate Limit Enabled
# Enable or disable rate limiting (true/false)
RATE_LIMIT_ENABLED=true

# Rate Limit Window (milliseconds)
# Time window for rate limiting in milliseconds
RATE_LIMIT_WINDOW_MS=60000

# Rate Limit Max Requests
# Maximum number of requests allowed per window
RATE_LIMIT_MAX_REQUESTS=20

# Rate Limit Disabled Routes
# Comma-separated list of routes to exclude from rate limiting
# Example: /api/health,/api/status
RATE_LIMIT_DISABLED_ROUTES=/api/health,/api/status

# -----------------------------------------------------------------------------
# SPAM GUARD
# -----------------------------------------------------------------------------
# Configuration for spam protection on comments and tickets

# Spam Guard Enabled
# Enable or disable spam guard (true/false)
SPAM_GUARD_ENABLED=true

# Spam Guard Cooldown (milliseconds)
# Minimum time between submissions from the same user
SPAM_GUARD_COOLDOWN_MS=10000

# -----------------------------------------------------------------------------
# ATTACHMENT CONFIGURATION
# -----------------------------------------------------------------------------
# Configuration for file attachments

# Allowed MIME Types
# Comma-separated list of allowed MIME types for attachments
ATTACH_ALLOWED_MIME=image/png,image/jpeg,application/pdf,text/plain

# Max Attachment Size (bytes)
# Maximum file size for attachments in bytes (default: 26214400 = 25MB)
ATTACH_MAX_BYTES=26214400

# Attachments Enabled (Public)
# Enable or disable attachment uploads in the UI (true/false)
# This is a Next.js public variable (exposed to browser)
NEXT_PUBLIC_ATTACHMENTS_ENABLED=true

# -----------------------------------------------------------------------------
# SLA CONFIGURATION
# -----------------------------------------------------------------------------
# Configuration for SLA (Service Level Agreement) monitoring

# SLA Reminder Lead Time (minutes)
# How many minutes before SLA deadline to send reminder notifications
SLA_REMINDER_LEAD_MINUTES=30

# -----------------------------------------------------------------------------
# TICKET REOPEN CONFIGURATION
# -----------------------------------------------------------------------------
# Configuration for ticket reopen throttling

# Reopen Cooldown Enabled
# Enable cooldown period between ticket reopens (true/false)
REOPEN_COOLDOWN_ENABLED=true

# Reopen Cooldown Period (milliseconds)
# Minimum time between ticket reopens (default: 600000 = 10 minutes)
REOPEN_COOLDOWN_MS=600000

# -----------------------------------------------------------------------------
# SECURITY & AUTHENTICATION
# -----------------------------------------------------------------------------

# CSAT Secret
# Secret key for CSAT (Customer Satisfaction) token signing
# Falls back to NEXTAUTH_SECRET if not set
# Generate with: openssl rand -base64 32
CSAT_SECRET=

# -----------------------------------------------------------------------------
# DEVELOPMENT & DEBUGGING
# -----------------------------------------------------------------------------

# Log Query Time
# Enable logging of database query execution times (true/false)
# Useful for performance analysis in development and production
LOG_QUERY_TIME=false

# -----------------------------------------------------------------------------
# DEPLOYMENT CONFIGURATION
# -----------------------------------------------------------------------------

# Application Port
# Port number for the Next.js application (used by Docker Compose)
# Default: 3000
APP_PORT=3000

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION (Docker Compose only)
# -----------------------------------------------------------------------------
# These are used by docker-compose.yml for PostgreSQL service configuration
# Not required if using external database

# PostgreSQL User
# POSTGRES_USER=postgres

# PostgreSQL Password
# POSTGRES_PASSWORD=postgres

# PostgreSQL Database Name
# POSTGRES_DB=helpdesk
