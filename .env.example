# HelpDeskApp Environment Variables
# Copy this file to .env.local and fill in your actual values
# Never commit .env.local to version control

# =============================================================================
# REQUIRED VARIABLES
# =============================================================================

# Database connection string (PostgreSQL)
# Format: postgresql://user:password@host:port/database
# For production, add ?sslmode=require for SSL
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/helpdesk

# NextAuth secret key (generate with: openssl rand -base64 32)
# Must be at least 32 characters long
NEXTAUTH_SECRET=your-nextauth-secret-here-change-in-production

# Application URL (no trailing slash)
# Development: http://localhost:3000
# Production: https://your-domain.com
NEXTAUTH_URL=http://localhost:3000

# Node.js environment
# Values: development | production | test
NODE_ENV=development

# =============================================================================
# WORKER CONFIGURATION (Optional)
# =============================================================================

# Redis connection string for BullMQ job queue
# Format: redis://[password@]host:port[/database]
# For production with TLS: rediss://[password@]host:port[/database]
REDIS_URL=redis://localhost:6379

# BullMQ queue name
BULLMQ_QUEUE=helpdesk-default

# BullMQ key prefix
BULLMQ_PREFIX=helpdesk

# Worker concurrency (number of jobs processed simultaneously)
WORKER_CONCURRENCY=5

# Maximum retry attempts for failed jobs
WORKER_MAX_ATTEMPTS=3

# Backoff delay between retries (milliseconds)
WORKER_BACKOFF_MS=5000

# Enable dead letter queue for failed jobs
WORKER_DLQ_ENABLED=true

# Dead letter queue name
WORKER_DLQ_NAME=helpdesk-default-dlq

# Enable dry run mode (test without executing jobs)
WORKER_DRY_RUN=false

# Enable dry run for health check
WORKER_HEALTH_DRY_RUN=false

# Number of failed jobs to sample in health check
WORKER_HEALTH_SAMPLE_FAILED=3

# =============================================================================
# EMAIL CONFIGURATION (Optional)
# =============================================================================

# Enable email notifications globally
EMAIL_ENABLED=false

# SMTP server hostname
SMTP_HOST=smtp.example.com

# SMTP server port (587 for STARTTLS, 465 for SSL)
SMTP_PORT=587

# SMTP authentication username
SMTP_USER=your-smtp-user

# SMTP authentication password (keep secure!)
SMTP_PASSWORD=your-smtp-password

# Default sender email address
SMTP_FROM=noreply@helpdesk.local

# =============================================================================
# STORAGE CONFIGURATION (Optional)
# =============================================================================

# Base URL for accessing stored files (no trailing slash)
STORAGE_BASE_URL=http://localhost:3000/uploads

# MinIO endpoint (for future S3 integration)
MINIO_ENDPOINT=http://localhost:9000

# MinIO access key (for future S3 integration)
MINIO_ACCESS_KEY=minioadmin

# MinIO secret key (for future S3 integration)
MINIO_SECRET_KEY=minioadmin

# =============================================================================
# RATE LIMITING (Optional)
# =============================================================================

# Enable rate limiting globally
RATE_LIMIT_ENABLED=true

# Rate limit window in milliseconds
RATE_LIMIT_WINDOW_MS=60000

# Maximum requests per window
RATE_LIMIT_MAX_REQUESTS=20

# Comma-separated list of routes to disable rate limiting
RATE_LIMIT_DISABLED_ROUTES=/api/health,/api/status

# =============================================================================
# SPAM GUARD (Optional)
# =============================================================================

# Enable spam guard for comments
SPAM_GUARD_ENABLED=true

# Cooldown period between comments (milliseconds)
SPAM_GUARD_COOLDOWN_MS=10000

# =============================================================================
# ATTACHMENT CONFIGURATION (Optional)
# =============================================================================

# Allowed MIME types for attachments (comma-separated)
ATTACH_ALLOWED_MIME=image/png,image/jpeg,application/pdf,text/plain

# Maximum attachment size in bytes (default: 25MB)
ATTACH_MAX_BYTES=26214400

# Enable attachments feature (public variable)
NEXT_PUBLIC_ATTACHMENTS_ENABLED=true

# =============================================================================
# SLA CONFIGURATION (Optional)
# =============================================================================

# Minutes before SLA deadline to send reminder
SLA_REMINDER_LEAD_MINUTES=30

# =============================================================================
# TICKET REOPEN CONFIGURATION (Optional)
# =============================================================================

# Enable cooldown period for ticket reopening
REOPEN_COOLDOWN_ENABLED=true

# Cooldown period in milliseconds
REOPEN_COOLDOWN_MS=60000

# =============================================================================
# SECURITY & AUTHENTICATION (Optional)
# =============================================================================

# CSAT token signing secret (falls back to NEXTAUTH_SECRET if not set)
CSAT_SECRET=

# =============================================================================
# DEVELOPMENT & DEBUGGING (Optional)
# =============================================================================

# Log slow database queries (milliseconds threshold)
LOG_QUERY_TIME=

# =============================================================================
# DEPLOYMENT CONFIGURATION (Optional)
# =============================================================================

# Application port (default: 3000)
APP_PORT=3000

# =============================================================================
# DOCKER COMPOSE VARIABLES (Optional - for local development)
# =============================================================================

# PostgreSQL configuration (used by docker-compose.yml)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=helpdesk

# MinIO configuration (used by docker-compose.yml)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_BROWSER_REDIRECT_URL=http://localhost:9001
