# Execution Plan Master

Phases: Phase 0 (foundation/readiness), MVP (P0), V1 (P1), V2 (P2). Tasks are dependency-ordered; stop/go checkpoints appear every 10–15 tasks. Each task lists goal, dependencies, impacted areas, acceptance, test proof, security/edge cases, and rollback.

## Definition of Done per phase
- **Phase 0:** Tooling, test harness, and failing regressions captured; no prod changes; CI green on lint/test skeleton.
- **MVP (P0):** Comment API live, search/pagination fixed, SLA stamping wired, audits/logging in place, core E2E green.
- **V1 (P1):** Attachments, admin CRUD, queues/notifications, SLA jobs live with tests and monitoring.
- **V2 (P2):** Reporting/analytics, retention/compliance, DR/observability, UX polish for scalability.

## Phase 0 tasks (15)
- PH0-01 Setup toolchain — deps: none; impacted: tooling/docs; acceptance: `pnpm install` succeeds and versions pinned; test proof: install log + `pnpm -v`; security/edge: keep `.env.local` gitignored; rollback: remove temp PATH notes.
- PH0-02 Verify Postgres connectivity/seed — deps: PH0-01; impacted: DB; acceptance: `pnpm prisma migrate dev --create-only` dry-run + `pnpm prisma db seed` succeed; test proof: prisma exit 0 and sample ticket present; security/edge: no production DB touched; rollback: drop local DB.
- PH0-03 Baseline lint/unit run — deps: PH0-01; impacted: CI; acceptance: `pnpm lint` and `pnpm test` executed with results recorded; test proof: command output; security/edge: none; rollback: n/a.
- PH0-04 Add `.env.example` with safe placeholders — deps: PH0-02; impacted: docs/onboarding; acceptance: example contains required keys without secrets; test proof: diff reviewed; security/edge: verify no real secrets; rollback: delete file.
- PH0-05 Add API test harness with auth/session helper — deps: PH0-03; impacted: tests/lib; acceptance: helper can issue authenticated requests in tests; test proof: sample test using helper passes; security/edge: ensure mock secrets; rollback: revert helper.
- PH0-06 Add failing regression test for dashboard search column bug — deps: PH0-05; impacted: tests/dashboard; acceptance: test asserts `descriptionMd` search and currently fails; test proof: red test documented; security/edge: none; rollback: skip test.
- PH0-07 Add failing regression test for missing comments API — deps: PH0-05; impacted: tests/comments; acceptance: POST to `/api/tickets/:id/comments` returns 404 expectation; test proof: red test; security/edge: none; rollback: skip test.
- PH0-08 Add failing regression test for unbounded ticket list (missing pagination) — deps: PH0-05; impacted: tests/api; acceptance: test expects pagination metadata; test proof: red test; security/edge: none; rollback: skip test.
- PH0-09 Create SLA fixtures (tickets with varying priorities/status) — deps: PH0-02; impacted: tests/seed; acceptance: fixture factory generates tickets/comments with SLA fields; test proof: factory used in tests; security/edge: keep fixture creds fake; rollback: remove fixtures.
- PH0-10 Create test data factory for users/teams/tickets — deps: PH0-09; impacted: tests; acceptance: reusable factory functions exist; test proof: sample test uses factory; security/edge: none; rollback: remove factory.
- PH0-11 Add CI pipeline stub (lint + unit) — deps: PH0-03; impacted: CI; acceptance: workflow file runs lint/test; test proof: CI dry-run or local act run; security/edge: no secrets hardcoded; rollback: remove workflow.
- PH0-12 Add coding standards doc (validation, auth, audit expectations) — deps: PH0-03; impacted: docs; acceptance: doc checked in; test proof: doc present; security/edge: none; rollback: delete doc.
- PH0-13 Add accessibility lint rule baseline for forms — deps: PH0-03; impacted: lint config/UI; acceptance: lint warns on missing labels; test proof: lint output; security/edge: none; rollback: revert config.
- PH0-14 Validate NextAuth env keys present locally — deps: PH0-04; impacted: env; acceptance: checklist updated; test proof: doc update; security/edge: avoid real values; rollback: revert doc.
- PH0-15 Stop/Go checkpoint — deps: PH0-01…PH0-14; impacted: planning; acceptance: red tests captured, tooling ready; test proof: checkpoint note; security/edge: none; rollback: n/a.

## MVP (P0) tasks (35)
- P0-01 Fix dashboard search to use `descriptionMd`/title with safe validation — deps: PH0-06; impacted: dashboard/API; acceptance: search returns matching tickets without Prisma error; test proof: PH0-06 turns green; security/edge: avoid SQL wildcards; rollback: restore previous query.
- P0-02 Add pagination parameters (take/skip, defaults/max) to `/api/tickets` — deps: PH0-08; impacted: API; acceptance: API responds with `meta.total` and bounded page size; test proof: pagination tests pass; security/edge: cap max page; rollback: remove pagination logic.
- P0-03 Implement POST `/api/tickets/[id]/comments` with Zod validation and org/role scoping — deps: PH0-07, P0-05; impacted: API/DB; acceptance: agents/admins can add internal/public, requesters public only; test proof: unit + integration; security/edge: body length limits, HTML sanitize Markdown; rollback: disable route.
- P0-04 Stamp SLA fields on comment/status changes (firstResponseAt, resolveDue recalculation) — deps: P0-03; impacted: API/DB; acceptance: first agent/internal comment sets firstResponseAt once; test proof: SLA tests; security/edge: timezone-safe; rollback: feature flag to bypass stamping.
- P0-05 Introduce shared authorization helper enforcing org ownership + role permissions — deps: PH0-05; impacted: API; acceptance: tickets/comments use helper; test proof: permission tests; security/edge: default deny; rollback: revert helper wiring.
- P0-06 Implement GET `/api/tickets/[id]/comments` with role-based filtering of internal notes — deps: P0-05; impacted: API; acceptance: requesters see only public; test proof: role tests; security/edge: org check; rollback: disable route.
- P0-07 Refactor ticket detail loader to consume comments API and handle loading/error states — deps: P0-06; impacted: UI; acceptance: detail page renders comments via API with skeleton/error toast; test proof: E2E; security/edge: hide internal notes for requesters; rollback: switch back to direct include.
- P0-08 Update comment form to new API with optimistic state + 401/403/429 handling — deps: P0-03, P0-06; impacted: UI; acceptance: double-submit blocked, toasts on errors; test proof: E2E; security/edge: debounce; rollback: revert form handler.
- P0-09 Add dashboard pagination UI + meta display; wire query params to API — deps: P0-02; impacted: UI; acceptance: paginated results with navigation; test proof: E2E pagination; security/edge: validate params server-side; rollback: hide pagination controls.
- P0-10 Add audit events for comment create/edit/delete and assignment changes — deps: P0-03, P0-05; impacted: DB/API; acceptance: audit records stored with actor and data; test proof: audit tests; security/edge: redact bodies? keep Markdown sanitized; rollback: bypass audit for comments.
- P0-11 Add DB indexes on ticket createdAt/status/priority for pagination — deps: P0-02; impacted: DB; acceptance: migration applied; test proof: Prisma migration; security/edge: downtime window noted; rollback: drop index migration.
- P0-12 Add structured logging/metrics on ticket/comment routes (latency, status codes) — deps: P0-02, P0-03; impacted: observability; acceptance: logs emit fields, metrics recorded; test proof: log sample; security/edge: avoid PII; rollback: disable logger.
- P0-13 Add rate limiting on ticket/comment mutations — deps: P0-12; impacted: API; acceptance: bursts limited with 429; test proof: rate limit test; security/edge: IP/user scope; rollback: disable limiter.
- P0-14 Add unit tests for comment validation and authorization — deps: P0-03, P0-05; impacted: tests; acceptance: tests cover requester vs agent paths; test proof: passing tests; security/edge: none; rollback: skip tests.
- P0-15 Add integration tests for ticket pagination/search filters — deps: P0-01, P0-02; impacted: tests; acceptance: endpoints verified with fixtures; test proof: green tests; security/edge: none; rollback: skip tests.
- P0-16 Add E2E for ticket create + comment (public/internal) and visibility rules — deps: P0-06, P0-08; impacted: tests/UI; acceptance: Playwright flow passes; test proof: E2E run; security/edge: reset DB per test; rollback: quarantine test.
- P0-17 Render SLA badges (due/breach) on dashboard and detail — deps: P0-04; impacted: UI; acceptance: SLA chips show due timestamps/breach; test proof: snapshot/E2E; security/edge: avoid leaking other org data; rollback: hide badges.
- P0-18 Hook firstResponseAt stamping from comments route (idempotent) — deps: P0-03, P0-04; impacted: API; acceptance: first agent/internal/public comment sets timestamp once; test proof: SLA tests; security/edge: none; rollback: guard to skip stamping.
- P0-19 Add requester close/reopen tests on update API — deps: P0-05; impacted: tests; acceptance: requester cannot change priority/assignee; test proof: green tests; security/edge: none; rollback: skip test.
- P0-20 Stop/Go checkpoint after comment/pagination rollout — deps: P0-01…P0-19; impacted: release; acceptance: stakeholders approve moving to attachments/admin; test proof: checkpoint note; security/edge: none; rollback: stay on MVP fixes.
- P0-21 Harden unauthenticated handling (401 redirects + toast) for protected pages — deps: P0-07; impacted: UI; acceptance: unauthenticated redirected to `/login` with message; test proof: E2E; security/edge: no open redirect; rollback: revert middleware handling.
- P0-22 Document API contract for tickets/comments (OpenAPI/README) — deps: P0-06; impacted: docs; acceptance: doc published; test proof: doc exists; security/edge: avoid secrets; rollback: remove doc.
- P0-23 Expand seed data to include 50+ tickets/comments for pagination tests — deps: P0-02; impacted: seed; acceptance: seed creates additional data; test proof: seed run; security/edge: synthetic data only; rollback: revert seed.
- P0-24 Add search parameter sanitization and length limits — deps: P0-01; impacted: API; acceptance: q length capped and trimmed; test proof: unit tests; security/edge: avoid regex DoS; rollback: loosen limits.
- P0-25 Expose search/pagination filters in API (status, priority, q) consistently — deps: P0-02; impacted: API; acceptance: filters documented and enforced; test proof: integration tests; security/edge: validate enums; rollback: revert schema.
- P0-26 Align dashboard filters with API (status/priority select) and preserve selections — deps: P0-25; impacted: UI; acceptance: filters persist across navigation; test proof: E2E; security/edge: encode params; rollback: remove persistence.
- P0-27 Publish client collection (Postman/Insomnia) for ticket/comment endpoints — deps: P0-22; impacted: docs/devex; acceptance: collection exported; test proof: file present; security/edge: scrub tokens; rollback: delete collection.
- P0-28 Add empty/error state designs for comments/pagination — deps: P0-07; impacted: UI; acceptance: UX reviewed; test proof: snapshots; security/edge: none; rollback: revert components.
- P0-29 Add `meta` pagination block to API responses and adapt UI — deps: P0-02; impacted: API/UI; acceptance: responses include count/hasNext; test proof: contract tests; security/edge: none; rollback: remove meta.
- P0-30 Stop/Go checkpoint after stability/perf validation — deps: P0-21…P0-29; impacted: release; acceptance: metrics and E2E green; test proof: checkpoint note; security/edge: none; rollback: stay on MVP.
- P0-31 Add response redaction middleware for errors (no stack/PII) — deps: P0-12; impacted: API; acceptance: 500 responses sanitized; test proof: error tests; security/edge: ensure logging still captures stack; rollback: remove middleware.
- P0-32 Add concurrency test to prevent duplicate comment submissions — deps: P0-03; impacted: tests/API; acceptance: double-post creates single comment; test proof: integration; security/edge: use idempotency token; rollback: disable token check.
- P0-33 Update user-facing docs for MVP workflows (create/update/comment) — deps: P0-08; impacted: docs; acceptance: README/docs updated; test proof: doc exists; security/edge: no credentials; rollback: revert doc.
- P0-34 Add accessibility review for new pagination/comment UI — deps: P0-28; impacted: UI; acceptance: labels/focus order fixed; test proof: lint/E2E; security/edge: none; rollback: revert tweaks.
- P0-35 MVP Definition of Done review/sign-off — deps: P0-01…P0-34; impacted: release; acceptance: DoD checklist met; test proof: sign-off note; security/edge: none; rollback: reopen tasks.

## V1 (P1) tasks (35)
- P1-01 Enable comment edit/delete with audit trail and visibility rules — deps: P0-10; impacted: API/UI; acceptance: edit window enforced; test proof: unit/E2E; security/edge: role check; rollback: disable edit/delete.
- P1-02 Build SLA service to recompute breach flags on status/priority/comment events — deps: P0-04; impacted: API/jobs; acceptance: tickets show breach flags; test proof: SLA tests; security/edge: clock skew handled; rollback: disable recalculation.
- P1-03 Implement queue endpoints (My, Unassigned, SLA risk, Team) with filters — deps: P0-25; impacted: API/UI; acceptance: queues return paginated lists; test proof: integration; security/edge: org scoping; rollback: disable endpoints.
- P1-04 Add permission tests for queue assignment (agent/admin only) — deps: P1-03; impacted: tests; acceptance: requester blocked; test proof: green tests; security/edge: none; rollback: skip tests.
- P1-05 Enforce org scoping middleware across new endpoints (queues/comments/attachments) — deps: P0-05; impacted: API; acceptance: centralized guard used; test proof: penetration tests; security/edge: default deny; rollback: revert middleware.
- P1-06 Expand audit logging for assignment changes/admin actions — deps: P0-10; impacted: DB; acceptance: audit entries include actor/object; test proof: audit tests; security/edge: redact PII; rollback: disable audit hook.
- P1-07 Build admin CRUD APIs for users/teams/tags — deps: P0-05; impacted: API/DB; acceptance: CRUD honors role + org; test proof: integration; security/edge: prevent self-demotion issues; rollback: disable routes.
- P1-08 Add pagination/sorting to queues with SLA/priority ordering — deps: P1-03; impacted: API/UI; acceptance: queue responses sorted; test proof: integration; security/edge: cap page size; rollback: revert sorting.
- P1-09 Add migration for `lastPublicCommentAt`/`lastActivityAt` fields — deps: P0-04; impacted: DB; acceptance: columns added/backfilled; test proof: migration run; security/edge: lock time; rollback: drop columns.
- P1-10 Implement attachment upload API with size/mime validation — deps: P0-12; impacted: API/storage; acceptance: uploads limited by mime/size; test proof: integration; security/edge: limit types; rollback: disable route.
- P1-11 Implement attachment download with signed URLs and TTL — deps: P1-10; impacted: API/storage; acceptance: signed URLs expire; test proof: unit; security/edge: org check before signing; rollback: disable signing.
- P1-12 Add malware scanning hook/quarantine flow for uploads — deps: P1-10; impacted: security; acceptance: scan executed, quarantine table; test proof: mock scan test; security/edge: disallow on fail; rollback: bypass scan.
- P1-13 Add attachment delete + quota enforcement + audit — deps: P1-10; impacted: API/DB; acceptance: delete records, adjust storage usage; test proof: integration; security/edge: only uploader/agent/admin; rollback: disable delete.
- P1-14 Update UI to show attachments list/upload/delete with progress — deps: P1-10; impacted: UI; acceptance: attachments visible, upload errors surfaced; test proof: E2E; security/edge: hide internal attachments from requesters; rollback: hide UI.
- P1-15 Add E2E for attachment upload/download permissions — deps: P1-14; impacted: tests; acceptance: requester sees only allowed files; test proof: E2E; security/edge: reset storage after test; rollback: quarantine test.
- P1-16 Build job runner skeleton for SLA breach scanning and notification trigger — deps: P1-02; impacted: jobs; acceptance: cron/job executes and logs; test proof: job test; security/edge: bounded batch size; rollback: disable cron.
- P1-17 Add metrics/alerts for job execution time/failures — deps: P1-16; impacted: observability; acceptance: alerts configured; test proof: simulated failure triggers alert; security/edge: no secrets in logs; rollback: disable alerts.
- P1-18 Implement email notification templates (assignment/status/mention/SLA) — deps: P1-16; impacted: notifications; acceptance: templates rendered with placeholders; test proof: snapshot tests; security/edge: avoid PII leakage; rollback: disable notifications.
- P1-19 Add user notification preferences (channels/on-off) — deps: P1-18; impacted: DB/UI; acceptance: per-user prefs stored/enforced; test proof: integration; security/edge: default opt-in/opt-out confirmed; rollback: default to minimal notifications.
- P1-20 Add notification throttling/batching to avoid spam — deps: P1-18; impacted: jobs; acceptance: batching rules enforced; test proof: rate tests; security/edge: avoid drops; rollback: disable batching.
- P1-21 Backfill/migrate existing tickets with new SLA/activity fields — deps: P1-09; impacted: DB; acceptance: script completes; test proof: migration logs; security/edge: backup before; rollback: restore backup.
- P1-22 Load test job + API interaction to ensure no perf regressions — deps: P1-16; impacted: perf; acceptance: throughput metrics within SLO; test proof: load-test report; security/edge: use non-prod data; rollback: rollback infra configs.
- P1-23 Build admin UI for SLA policies CRUD — deps: P1-07; impacted: UI/API; acceptance: admins can add/update/delete policies; test proof: E2E; security/edge: org scoping; rollback: hide UI.
- P1-24 Build admin UI for users/teams/tags CRUD — deps: P1-07; impacted: UI; acceptance: CRUD flows working with validation; test proof: E2E; security/edge: role guard; rollback: hide UI.
- P1-25 Add saved filters for dashboards/queues (per user) — deps: P0-25; impacted: DB/UI; acceptance: user can save/apply filter; test proof: integration; security/edge: org isolation; rollback: disable feature.
- P1-26 Implement @mention detection and mention table for notifications — deps: P1-18; impacted: API; acceptance: mentions parsed, notifications sent; test proof: unit; security/edge: sanitize Markdown; rollback: disable mentions.
- P1-27 Enforce internal comment visibility in UI (badges, hide for requester) — deps: P0-06; impacted: UI; acceptance: requesters never see internal; test proof: E2E; security/edge: server-side filter; rollback: hide internal notes entirely.
- P1-28 Add agent productivity basic report (tickets closed, SLA hit) — deps: P1-02; impacted: reporting; acceptance: report endpoints return metrics; test proof: integration; security/edge: org scoping; rollback: disable endpoint.
- P1-29 Add API contract tests for attachments endpoints — deps: P1-10; impacted: tests; acceptance: tests validate mime/size/auth; test proof: green tests; security/edge: none; rollback: skip tests.
- P1-30 Stop/Go checkpoint after attachments/notifications — deps: P1-01…P1-29; impacted: release; acceptance: stakeholders approve; test proof: checkpoint note; security/edge: none; rollback: hold release.
- P1-31 Accessibility pass for new UIs (attachments/admin/queues) — deps: P1-14, P1-24; impacted: UI; acceptance: WCAG checks fixed; test proof: lint/E2E; security/edge: none; rollback: revert styling.
- P1-32 Add offline/timeout handling for uploads (resume/cancel) — deps: P1-10; impacted: UI; acceptance: cancel/resume works; test proof: integration; security/edge: ensure signed URLs refreshed; rollback: disable resume.
- P1-33 Add SLA breach banner + actions (escalate) on ticket detail — deps: P1-02; impacted: UI; acceptance: banner shows on breach; test proof: E2E; security/edge: role gate escalate; rollback: hide banner.
- P1-34 Add multi-tenant isolation tests for attachments/queues/notifications — deps: P1-05; impacted: tests; acceptance: cross-org access blocked; test proof: tests; security/edge: none; rollback: skip tests.
- P1-35 V1 Definition of Done review/sign-off — deps: P1-01…P1-34; impacted: release; acceptance: DoD checklist met; test proof: sign-off note; security/edge: none; rollback: reopen items.

## V2 (P2) tasks (35)
- P2-01 Build reporting endpoints (backlog, inflow/outflow, SLA compliance) with CSV export — deps: P1-28; impacted: reporting/API; acceptance: endpoints return aggregates; test proof: integration; security/edge: org scoping; rollback: disable exports.
- P2-02 Expand observability dashboards (APM/metrics for API + jobs) — deps: P0-12, P1-17; impacted: ops; acceptance: dashboards live; test proof: screenshot/logs; security/edge: scrub PII; rollback: remove dashboards.
- P2-03 Add trend reports (reopen rate, MTTA/MTTR per team) — deps: P2-01; impacted: reporting; acceptance: charts/tables render; test proof: integration; security/edge: org scoping; rollback: hide report.
- P2-04 Add notification retry/DLQ + monitoring — deps: P1-18; impacted: jobs; acceptance: failed messages retried with cap; test proof: simulated failure; security/edge: avoid infinite loops; rollback: disable retry.
- P2-05 Implement backup/restore runbook and tested restore — deps: P1-21; impacted: ops; acceptance: documented restore with success proof; test proof: restore drill; security/edge: protect backup secrets; rollback: n/a.
- P2-06 Add PII-safe export with field redaction controls — deps: P2-01; impacted: reporting; acceptance: export respects redaction; test proof: tests; security/edge: watermark exports; rollback: disable export.
- P2-07 Implement attachment retention/expiry policy per org — deps: P1-13; impacted: storage; acceptance: expired files purged after policy; test proof: job test; security/edge: legal hold respected; rollback: pause purge.
- P2-08 Add audit/comment retention + purge job with exemptions — deps: P2-07; impacted: DB; acceptance: retention policies enforced; test proof: job test; security/edge: maintain legal hold; rollback: disable job.
- P2-09 Add admin controls for report scopes (team/org/date) and roles — deps: P2-01; impacted: UI; acceptance: controls enforced; test proof: E2E; security/edge: least privilege; rollback: hide controls.
- P2-10 Add legal hold/purge hooks for attachments/comments — deps: P2-07; impacted: storage/policy; acceptance: legal hold flag blocks purge; test proof: tests; security/edge: audit hold; rollback: clear flag.
- P2-11 Implement per-org API rate limit configuration — deps: P0-13; impacted: API; acceptance: limits configurable; test proof: config test; security/edge: defaults safe; rollback: revert config.
- P2-12 Accessibility review for reporting/admin dashboards — deps: P2-03, P2-09; impacted: UI; acceptance: WCAG fixes; test proof: lint/E2E; security/edge: none; rollback: revert tweaks.
- P2-13 Add Kanban/board view for queues with drag-drop assignments — deps: P1-03; impacted: UI/API; acceptance: assignments persist; test proof: E2E; security/edge: role guard; rollback: disable board.
- P2-14 Conduct disaster recovery drill (DB + storage) — deps: P2-05; impacted: ops; acceptance: RTO/RPO met; test proof: drill log; security/edge: scrub data; rollback: schedule redo.
- P2-15 Define error budgets/SLOs for API latency and job completion — deps: P2-02; impacted: ops; acceptance: SLO docs/alerts; test proof: alert firing on breach; security/edge: none; rollback: disable SLO alerts.
- P2-16 Add multi-region attachment storage option and config — deps: P1-10; impacted: storage; acceptance: bucket config documented; test proof: upload in region; security/edge: cross-region access control; rollback: disable secondary region.
- P2-17 Add knowledge base/FAQ linking to tickets (optional) — deps: P1-24; impacted: UI; acceptance: link field stored; test proof: integration; security/edge: sanitize URLs; rollback: hide field.
- P2-18 Add advanced saved dashboards (custom widgets per user) — deps: P2-03; impacted: UI/DB; acceptance: widgets saved/applied; test proof: E2E; security/edge: org scoping; rollback: disable feature.
- P2-19 Add SSO option (OIDC/SAML) with org mapping — deps: PH0-14; impacted: auth; acceptance: SSO login works; test proof: integration; security/edge: enforce org mapping; rollback: disable SSO.
- P2-20 Mobile/responsive polish for dashboard/queues/reports — deps: P1-14; impacted: UI; acceptance: responsive tests pass; test proof: Percy/snapshots; security/edge: none; rollback: revert CSS.
- P2-21 Implement archive job for long-closed tickets (readonly) — deps: P2-08; impacted: DB; acceptance: archived tickets hidden from active queues; test proof: job test; security/edge: retrieval path defined; rollback: unarchive.
- P2-22 Optimize attachment uploads (chunked, resumable) — deps: P1-10; impacted: API/UI; acceptance: chunked upload works; test proof: integration; security/edge: checksum validation; rollback: disable chunking.
- P2-23 Add data anonymization option for exports and analytics — deps: P2-06; impacted: reporting; acceptance: anonymized export toggles; test proof: tests; security/edge: defaults to non-anonymized only for admins; rollback: disable.
- P2-24 Add backlog burn-down and forecast report — deps: P2-03; impacted: reporting; acceptance: chart renders; test proof: integration; security/edge: org scoping; rollback: hide report.
- P2-25 Stop/Go checkpoint mid-V2 — deps: P2-01…P2-24; impacted: release; acceptance: confirm readiness for compliance/DR; test proof: checkpoint note; security/edge: none; rollback: hold release.
- P2-26 Add E2E for reports/exports (CSV/PDF) with permissions — deps: P2-01; impacted: tests; acceptance: unauthorized blocked; test proof: E2E; security/edge: scrub data; rollback: skip tests.
- P2-27 Add API versioning for reports and attachments — deps: P1-29; impacted: API; acceptance: version header/query supported; test proof: contract tests; security/edge: default to latest; rollback: remove versioning.
- P2-28 Add watermarking for exports with user/time metadata — deps: P2-06; impacted: reporting; acceptance: exports watermarked; test proof: snapshot; security/edge: deter leaks; rollback: disable watermark.
- P2-29 Add real-time notifications (websocket/server-sent events) for assignments/comments — deps: P1-18; impacted: API/UI; acceptance: live updates delivered; test proof: E2E; security/edge: auth tokens validated; rollback: disable channel.
- P2-30 Create runbooks for attachments/queue/report troubleshooting — deps: P1-10, P2-01; impacted: ops; acceptance: docs checked in; test proof: doc present; security/edge: no secrets; rollback: delete doc.
- P2-31 Compliance audit (GDPR/PII) checklist and gap fixes — deps: P2-06; impacted: security/policy; acceptance: checklist completed with actions; test proof: doc; security/edge: legal review; rollback: flag open items.
- P2-32 Reliability improvements for queue processing (idempotency, retries) — deps: P1-03; impacted: API/jobs; acceptance: queue ops idempotent; test proof: tests; security/edge: dedupe tokens; rollback: disable retry.
- P2-33 Integrate error tracking (Sentry/Telemetry) with PII scrubbing — deps: P0-12; impacted: ops; acceptance: errors captured scrubbed; test proof: sample error; security/edge: no secrets; rollback: remove integration.
- P2-34 Add shared/role-based saved filter sharing with audit — deps: P1-25; impacted: UI/DB; acceptance: shareable filters with audit; test proof: integration; security/edge: org scoping; rollback: disable sharing.
- P2-35 V2 Definition of Done review/sign-off — deps: P2-01…P2-34; impacted: release; acceptance: DoD checklist met; test proof: sign-off note; security/edge: none; rollback: reopen items.
