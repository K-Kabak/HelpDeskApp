# Core Gaps (Repo – Baseline HelpDesk)

Prioritized gaps around comment validation, search, pagination, audit visibility, and attachments have been resolved. The current focus is on the pieces of the SLA automation workflow that still lack execution paths.

| Priority | Area | Gap | Why it matters | Current evidence | Suggested direction | Dependencies | Complexity |
| --- | --- | --- | --- | --- | --- | --- | --- |
| P0 | SLA job scheduling | `enqueueSlaJob` merely records dedupe entries and returns metadata; it never adds work to any queue, so reminders/breach checks never reach a worker. | SLA breach monitoring and reminder notifications stay dormant even though the scheduler prepares payloads. | `src/lib/sla-jobs.ts` L33-L55 ���F:src/lib/sla-scheduler.ts L26-L122 | Hook `enqueueSlaJob` into BullMQ/Redis (or another durable queue), keep idempotency checks, and ensure `scheduleSlaJobsForTicket` pushes jobs for both deadlines/reminders. | Queue client/config, Redis, SLA job schema | M |
| P0 | Background worker | `src/worker/index.ts` only logs incoming jobs; the TODO dispatcher never executes any SLA, reminder, or audit job logic. | Even after queue wiring, no job types will be processed, so SLA automation and other background work remain inert. | `src/worker/index.ts` L47-L67 | Implement a dispatcher that maps known job names to handlers (e.g., SLA breach, reminder) and surface meaningful telemetry/retries. | BullMQ worker, SLA helpers, retry policy | M |
| P1 | SLA pause/resume lifecycle | Helpers (`startSlaPause`, `deriveSlaPauseUpdates`) are defined but never called, so waiting-for-requester state never updates pause timestamps or shifts due dates. | Delay periods are not subtracted from SLA timers, which lets due dates count continuously even when the ticket should be paused. | `src/lib/sla-pause.ts` L17-L100 | Invoke pause/resume helpers inside ticket update flows when the status toggles to/from `OCZEKUJE_NA_UZYTKOWNIKA`, persist the pause fields, and adjust deadlines before scheduling jobs. | Ticket update API, Prisma SLA fields, SLA scheduler | S |
