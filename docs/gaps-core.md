# Core gaps toward HelpDesk baseline

| Area | Gap | Why it matters | Current evidence | Suggested direction | Dependencies | Complexity | Priority |
| --- | --- | --- | --- | --- | --- | --- | --- |
| Comments | No `/api/tickets/[id]/comments` implementation while UI posts to it, causing 404s and blocking collaboration. | Breaks primary workflow of adding updates to tickets. | UI posts to missing endpoint; API directory lacks route. | Add authenticated comments API supporting public/internal flags, validating org ownership and author role. | Prisma comment model; auth session. | M | P0 |
| Ticket search | Dashboard uses non-existent `description` field in Prisma query. | Requests with `q` crash at runtime, preventing search/filter use. | Query references `description`; schema only has `descriptionMd`. | Adjust search to use `descriptionMd` (and optionally comments) with safe pagination. | None. | S | P0 |
| Scalability | Ticket list API returns unbounded results with no pagination/limits. | Large orgs will fetch all tickets, risking timeouts and data leakage via client payload size. | `findMany` without take/skip/filters beyond role. | Introduce pagination params with validation; enforce sane defaults/maximums server-side. | Search filter fix. | M | P1 |
| SLA tracking | SLA due fields set on create but not updated on first response/resolution events. | SLA reports/timers will be inaccurate; cannot detect breaches. | Create sets due times; update API changes status but never sets `firstResponseAt` or recalculates due times. | Add SLA service to stamp first response/resolution timestamps and compute breach flags during comments/status changes. | Comment API; status workflow. | M | P1 |
| Attachments | No upload/download handling or storage abstraction. | Users cannot share diagnostics; security of files undefined. | No attachment code found in app/API search. | Add attachment service (streaming upload, mime/size validation, signed download URLs) using storage provider abstraction. | Auth/session; ticket ownership checks. | L | P2 |
| Admin setup | No admin endpoints/UI to manage teams, users, tags, SLA policies beyond seed data. | Operational setup stuck at seed defaults; cannot onboard new org data. | API folder contains only auth/tickets handlers. | Deliver admin CRUD APIs/pages with org scoping and audit logs. | Auth roles; Prisma models. | M | P2 |